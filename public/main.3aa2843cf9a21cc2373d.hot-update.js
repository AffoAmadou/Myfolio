/*! For license information please see main.3aa2843cf9a21cc2373d.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatestarter("main",{"./app/components/Canvas/Home/Media.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s("./node_modules/ogl/src/core/Program.js"),h=s("./node_modules/ogl/src/core/Mesh.js"),r=s("./app/shaders/home-fragment.glsl"),o=s("./app/shaders/home-vertex.glsl"),a=s("./node_modules/gsap/index.js");class l{constructor({element:e,geometry:t,gl:s,index:i,scene:h,sizes:r}){this.element=e,this.geometry=t,this.gl=s,this.scene=h,this.index=i,this.sizes=r,this.createTexture(),this.createProgram(),this.createMesh(),this.extra={x:0,y:0},this.opacity={current:0,target:0,multiplier:0,lerp:.1}}createTexture(){const e=this.element.querySelector(".home__gallery__media__image");this.texture=window.TEXTURES[e.getAttribute("data-src")]}createProgram(){this.program=new i.Program(this.gl,{fragment:r.default,vertex:o.default,uniforms:{uAlpha:{value:0},uSpeed:{value:0},uViewportSizes:{value:[this.sizes.width,this.sizes.height]},tMap:{value:this.texture}}})}createMesh(){this.mesh=new h.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene),this.mesh.scale.x=2}createBounds({sizes:e}){this.sizes=e,this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY()}show(){a.default.fromTo(this.opacity,{multiplier:0},{multiplier:1})}hide(){a.default.to(this.opacity,{multiplier:0})}onResize(e,t){this.extra={x:0,y:0},this.createBounds(e),this.updateX(t&&t.x),this.updateY(t&&t.y)}updateScale(){this.width=this.bounds.width/window.innerWidth,this.height=this.bounds.height/window.innerHeight,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(e=0){this.x=(this.bounds.left+e)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra.x}updateY(e=0){this.y=(this.bounds.top+e)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height+this.extra.y}update(e,t,s){this.bounds&&(this.updateX(e),this.updateY(),this.program.uniforms.uSpeed.value=t,this.program.uniforms.uSpeed.value=t,this.program.uniforms.uAlpha.value=this.opacity.multiplier)}}},"./app/components/Canvas/Home/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s("./node_modules/lodash/lodash.js"),h=s("./node_modules/ogl/src/core/Transform.js"),r=s("./node_modules/ogl/src/extras/Plane.js"),o=s("./app/components/Canvas/Home/Media.js"),a=s("./node_modules/prefix/index.js"),l=s.n(a),n=s("./node_modules/gsap/index.js");const d=class{constructor({gl:e,scene:t,sizes:s}){this.gl=e,this.sizes=s,this.scene=t,this.group=new h.Transform,this.galleryElement=document.querySelector(".home__gallery"),this.galleryElementWrapper=document.querySelector(".home__gallery__wrapper"),this.mediasElements=document.querySelectorAll(".home__gallery__media"),this.projectsElementsActive="home__article--active",this.projectsElements=document.querySelectorAll(".home__article"),this.projectsTitle=document.querySelectorAll(".home__title__article"),this.projectsTitleActive="home__title__article--active",this.transformPrefix=l()("transform"),this.scroll={current:0,target:0,start:0,lerp:.1,last:0,velocity:1},this.speed={target:0,current:0,lerp:.1},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new r.Plane(this.gl,{widthSegments:20,heightSegments:20})}createGallery(){this.medias=(0,i.map)(this.mediasElements,((e,t)=>new o.default({element:e,geometry:this.geometry,index:t,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){(0,i.map)(this.medias,(e=>e.show()))}hide(){(0,i.map)(this.medias,(e=>e.hide()))}onResize(e){this.sizes=e.sizes,this.bounds=this.galleryElementWrapper.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,(0,i.map)(this.medias,(t=>t.onResize(e,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:e,y:t}){this.speed.target=1,this.scroll.last=this.scroll.current}onTouchMove({x:e,y:t}){const s=e.start-e.end;this.scroll.target=this.scroll.last-s}onTouchUp({x:e,y:t}){this.speed.target=0}onWheel({pixelY:e}){this.scroll.target+=e}onChange(e){this.index=e,console.log(this.mediasElements.length),this.index===this.mediasElements.length&&(this.index=this.index-1);const t=parseInt(this.mediasElements[this.index].getAttribute("data-index"));(0,i.map)(this.projectsElements,((e,s)=>{s===t?e.classList.add(this.projectsElementsActive):e.classList.remove(this.projectsElementsActive)})),(0,i.map)(this.projectsTitle,((e,s)=>{console.log(s,t),s===t?e.classList.add(this.projectsTitleActive):e.classList.remove(this.projectsTitleActive)}))}update(){if(!this.bounds)return;this.speed.current=n.default.utils.interpolate(this.speed.current,this.speed.target,this.speed.lerp),this.scroll.target=n.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=n.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.galleryElement.style[this.transformPrefix]=`translateX(${this.scroll.current}px)`,this.scroll.last=this.scroll.current;const e=Math.floor(Math.abs(this.scroll.current/this.scroll.limit)*this.medias.length);this.index!==e&&this.onChange(e),(0,i.map)(this.medias,((e,t)=>{e.update(this.scroll.current,this.speed.current,this.index)}))}destroy(){this.scene.removeChild(this.group)}}},"./app/components/Canvas/Project/Media.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s("./node_modules/ogl/src/core/Program.js"),h=s("./node_modules/ogl/src/core/Mesh.js"),r=s("./app/shaders/plane-fragment.glsl"),o=s("./app/shaders/plane-vertex.glsl"),a=s("./node_modules/gsap/index.js");class l{constructor({element:e,geometry:t,gl:s,index:i,scene:h,sizes:r}){this.element=e,this.geometry=t,this.gl=s,this.scene=h,this.index=i,this.sizes=r,this.createTexture(),this.createProgram(),this.createMesh(),this.extra={x:0,y:0}}createTexture(){const e=this.element.querySelector("img");this.texture=window.TEXTURES[e.getAttribute("data-src")]}createProgram(){this.program=new i.Program(this.gl,{fragment:r.default,vertex:o.default,uniforms:{uAlpha:{value:0},tMap:{value:this.texture}}})}createMesh(){this.mesh=new h.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene)}createBounds({sizes:e}){this.sizes=e,this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY()}show(){a.default.fromTo(this.program.uniforms.uAlpha,{value:0},{value:1})}hide(){a.default.to(this.program.uniforms.uAlpha,{value:0})}onResize(e,t){this.extra=0,this.createBounds(e),this.updateX(t),this.updateY(0)}updateRotation(){this.mesh.rotation.z=a.default.utils.mapRange(-this.sizes.width/2,this.sizes.width/2,.1*Math.PI,.1*-Math.PI,this.mesh.position.x)}updateScale(){this.width=this.bounds.width/window.innerWidth,this.height=this.bounds.height/window.innerHeight,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(e=0){this.x=(this.bounds.left+e)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra}updateY(e=0){this.y=(this.bounds.top+e)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height,this.mesh.position.y+=40*Math.cos(this.mesh.position.x/this.sizes.width*Math.PI*.1)-40}update(e){this.bounds&&(this.updateRotation(),this.updateScale(),this.updateX(e),this.updateY(0))}}},"./app/components/Canvas/Project/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var i=s("./node_modules/lodash/lodash.js"),h=s("./node_modules/ogl/src/core/Transform.js"),r=s("./node_modules/ogl/src/extras/Plane.js"),o=s("./app/components/Canvas/Project/Gallery.js");Object(function(){var e=new Error("Cannot find module './Picture'");throw e.code="MODULE_NOT_FOUND",e}());const a=class{constructor({gl:e,scene:t,sizes:s,transition:i}){this.id="project",this.scene=t,console.log(this.scene),this.gl=e,this.sizes=s,this.group=new h.Transform,this.transition=i,this.createGeometry(),this.createGalleries(),this.group.setParent(t),this.show()}createGeometry(){this.geometry=new r.Plane(this.gl)}createGalleries(){this.Picture=new Object(function(){var e=new Error("Cannot find module './Picture'");throw e.code="MODULE_NOT_FOUND",e}())({gl:this.gl,scene:this.scene,sizes:this.sizes,transition:this.transition}),this.galleriesElements=document.querySelectorAll(".project__mobile"),this.galleries=(0,i.map)(this.galleriesElements,((e,t)=>new o.default({element:e,geometry:this.geometry,index:t,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){(0,i.map)(this.galleries,(e=>e.show()))}hide(){(0,i.map)(this.galleries,(e=>e.hide()))}onResize(e){(0,i.map)(this.galleries,(t=>t.onResize(e)))}onTouchDown(e){(0,i.map)(this.galleries,(t=>t.onTouchDown(e)))}onTouchMove(e){(0,i.map)(this.galleries,(t=>t.onTouchMove(e)))}onTouchUp(e){(0,i.map)(this.galleries,(t=>t.onTouchUp(e)))}onWheel({pixelX:e,pixelY:t}){}update(e){(0,i.map)(this.galleries,(t=>t.update(e)))}destroy(){(0,i.map)(this.galleries,(e=>e.destroy()))}}}},(function(e){e.h=()=>"088f806d6e8ea196868f"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUkxRSxLQUFLZ0gsV0FBV0UsR0FBV0EsRUFBUXZFLFNBQVNpQyxJQUNuRCxDQUVERyxZQUFZSCxJQUNSRixFQUFBQSxFQUFBQSxLQUFJMUUsS0FBS2dILFdBQVdFLEdBQVdBLEVBQVFuQyxZQUFZSCxJQUN0RCxDQUNESSxZQUFZSixJQUNSRixFQUFBQSxFQUFBQSxLQUFJMUUsS0FBS2dILFdBQVdFLEdBQVdBLEVBQVFsQyxZQUFZSixJQUN0RCxDQUNETyxVQUFVUCxJQUNORixFQUFBQSxFQUFBQSxLQUFJMUUsS0FBS2dILFdBQVdFLEdBQVdBLEVBQVEvQixVQUFVUCxJQUNwRCxDQUVEUSxTQUFRLE9BQUUrQixFQUFGLE9BQVU5QixJQUNqQixDQU1EbkMsT0FBT04sSUFDSDhCLEVBQUFBLEVBQUFBLEtBQUkxRSxLQUFLZ0gsV0FBV0UsR0FBV0EsRUFBUWhFLE9BQU9OLElBQ2pELENBRUR3RCxXQUNJMUIsRUFBQUEsRUFBQUEsS0FBSTFFLEtBQUtnSCxXQUFXRSxHQUFXQSxFQUFRZCxXQUMxQyxrQkNyRkxnQixFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhcnRlci8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Ib21lL01lZGlhLmpzIiwid2VicGFjazovL3N0YXJ0ZXIvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvSG9tZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9zdGFydGVyLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL1Byb2plY3QvTWVkaWEuanMiLCJ3ZWJwYWNrOi8vc3RhcnRlci8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Qcm9qZWN0L2luZGV4LmpzIiwid2VicGFjazovL3N0YXJ0ZXIvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1lc2gsIFByb2dyYW0sIFRleHR1cmUgfSBmcm9tICdvZ2wnXHJcblxyXG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnc2hhZGVycy9ob21lLWZyYWdtZW50Lmdsc2wnXHJcbmltcG9ydCB2ZXJ0ZXggZnJvbSAnc2hhZGVycy9ob21lLXZlcnRleC5nbHNsJ1xyXG5cclxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lZGlhIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgZWxlbWVudCwgZ2VvbWV0cnksIGdsLCBpbmRleCwgc2NlbmUsIHNpemVzIH0pIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IGdlb21ldHJ5XHJcbiAgICAgICAgdGhpcy5nbCA9IGdsXHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lXHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4XHJcbiAgICAgICAgdGhpcy5zaXplcyA9IHNpemVzXHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dHVyZSgpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVQcm9ncmFtKClcclxuICAgICAgICB0aGlzLmNyZWF0ZU1lc2goKVxyXG5cclxuICAgICAgICB0aGlzLmV4dHJhID0ge1xyXG4gICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICB5OiAwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgICAgICAgIHRhcmdldDogMCxcclxuICAgICAgICAgICAgbXVsdGlwbGllcjogMCxcclxuICAgICAgICAgICAgbGVycDogMC4xXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3JlYXRlVGV4dHVyZSgpIHtcclxuICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZ2FsbGVyeV9fbWVkaWFfX2ltYWdlJylcclxuICAgICAgICB0aGlzLnRleHR1cmUgPSB3aW5kb3cuVEVYVFVSRVNbaW1hZ2UuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpXVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVByb2dyYW0oKSB7XHJcblxyXG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IG5ldyBQcm9ncmFtKHRoaXMuZ2wsIHtcclxuICAgICAgICAgICAgZnJhZ21lbnQsXHJcbiAgICAgICAgICAgIHZlcnRleCxcclxuICAgICAgICAgICAgdW5pZm9ybXM6IHtcclxuICAgICAgICAgICAgICAgIHVBbHBoYTogeyB2YWx1ZTogMCB9LFxyXG4gICAgICAgICAgICAgICAgdVNwZWVkOiB7IHZhbHVlOiAwIH0sXHJcbiAgICAgICAgICAgICAgICB1Vmlld3BvcnRTaXplczogeyB2YWx1ZTogW3RoaXMuc2l6ZXMud2lkdGgsIHRoaXMuc2l6ZXMuaGVpZ2h0XSB9LFxyXG4gICAgICAgICAgICAgICAgdE1hcDogeyB2YWx1ZTogdGhpcy50ZXh0dXJlIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZU1lc2goKSB7XHJcbiAgICAgICAgdGhpcy5tZXNoID0gbmV3IE1lc2godGhpcy5nbCwge1xyXG4gICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcclxuICAgICAgICAgICAgcHJvZ3JhbTogdGhpcy5wcm9ncmFtXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5tZXNoLnNldFBhcmVudCh0aGlzLnNjZW5lKVxyXG5cclxuICAgICAgICB0aGlzLm1lc2guc2NhbGUueCA9IDJcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCb3VuZHMoeyBzaXplcyB9KSB7XHJcbiAgICAgICAgdGhpcy5zaXplcyA9IHNpemVzXHJcblxyXG4gICAgICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlU2NhbGUoKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWCgpXHJcbiAgICAgICAgdGhpcy51cGRhdGVZKClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQW5pbWF0aW9uc1xyXG4gICAgICovXHJcblxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgR1NBUC5mcm9tVG8odGhpcy5vcGFjaXR5LCB7XHJcbiAgICAgICAgICAgIG11bHRpcGxpZXI6IDBcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG11bHRpcGxpZXI6IDFcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgR1NBUC50byh0aGlzLm9wYWNpdHksIHtcclxuICAgICAgICAgICAgbXVsdGlwbGllcjogMFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAgKiBFdmVudHNcclxuICAgICAgKi9cclxuICAgIG9uUmVzaXplKHNpemVzLCBzY3JvbGwpIHtcclxuICAgICAgICB0aGlzLmV4dHJhID0ge1xyXG4gICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICB5OiAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQm91bmRzKHNpemVzKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWChzY3JvbGwgJiYgc2Nyb2xsLngpXHJcbiAgICAgICAgdGhpcy51cGRhdGVZKHNjcm9sbCAmJiBzY3JvbGwueSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExPT1BcclxuICAgICAqL1xyXG4gICAgdXBkYXRlU2NhbGUoKSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuYm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGhcclxuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuYm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodFxyXG5cclxuICAgICAgICB0aGlzLm1lc2guc2NhbGUueCA9IHRoaXMuc2l6ZXMud2lkdGggKiB0aGlzLndpZHRoXHJcbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnkgPSB0aGlzLnNpemVzLmhlaWdodCAqIHRoaXMuaGVpZ2h0XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlWCh4ID0gMCkge1xyXG4gICAgICAgIHRoaXMueCA9ICh0aGlzLmJvdW5kcy5sZWZ0ICsgeCkgLyB3aW5kb3cuaW5uZXJXaWR0aFxyXG4gICAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi54ID0gKC10aGlzLnNpemVzLndpZHRoIC8gMikgKyAodGhpcy5tZXNoLnNjYWxlLnggLyAyKSArICh0aGlzLnggKiB0aGlzLnNpemVzLndpZHRoKSArIHRoaXMuZXh0cmEueFxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVkoeSA9IDApIHtcclxuICAgICAgICB0aGlzLnkgPSAodGhpcy5ib3VuZHMudG9wICsgeSkgLyB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB0aGlzLm1lc2gucG9zaXRpb24ueSA9ICh0aGlzLnNpemVzLmhlaWdodCAvIDIpIC0gKHRoaXMubWVzaC5zY2FsZS55IC8gMikgLSAodGhpcy55ICogdGhpcy5zaXplcy5oZWlnaHQpICsgdGhpcy5leHRyYS55XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHNjcm9sbCwgc3BlZWQsIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJvdW5kcykgcmV0dXJuXHJcbiAgICAgICAgdGhpcy51cGRhdGVYKHNjcm9sbClcclxuICAgICAgICB0aGlzLnVwZGF0ZVkoKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucHJvZ3JhbS51bmlmb3Jtcy51U3BlZWQudmFsdWUgPSBzcGVlZFxyXG5cclxuICAgICAgICB0aGlzLnByb2dyYW0udW5pZm9ybXMudVNwZWVkLnZhbHVlID0gc3BlZWRcclxuICAgICAgICB0aGlzLnByb2dyYW0udW5pZm9ybXMudUFscGhhLnZhbHVlID0gIHRoaXMub3BhY2l0eS5tdWx0aXBsaWVyXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBtYXAgfSBmcm9tIFwibG9kYXNoXCJcclxuaW1wb3J0IHsgUGxhbmUsIFRyYW5zZm9ybSB9IGZyb20gXCJvZ2xcIlxyXG5pbXBvcnQgTWVkaWEgZnJvbSBcIi4vTWVkaWFcIlxyXG5pbXBvcnQgUHJlZml4IGZyb20gXCJwcmVmaXhcIlxyXG5cclxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgZ2wsIHNjZW5lLCBzaXplcyB9KSB7XHJcbiAgICAgICAgdGhpcy5nbCA9IGdsXHJcbiAgICAgICAgdGhpcy5zaXplcyA9IHNpemVzXHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lXHJcblxyXG4gICAgICAgIHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKClcclxuXHJcbiAgICAgICAgdGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19nYWxsZXJ5JylcclxuXHJcbiAgICAgICAgdGhpcy5nYWxsZXJ5RWxlbWVudFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZ2FsbGVyeV9fd3JhcHBlcicpXHJcblxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5tZWRpYXNFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ob21lX19nYWxsZXJ5X19tZWRpYScpXHJcblxyXG5cclxuICAgICAgICB0aGlzLnByb2plY3RzRWxlbWVudHNBY3RpdmUgPSAnaG9tZV9fYXJ0aWNsZS0tYWN0aXZlJ1xyXG4gICAgICAgIHRoaXMucHJvamVjdHNFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ob21lX19hcnRpY2xlJylcclxuXHJcbiAgICAgICAgdGhpcy5wcm9qZWN0c1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvbWVfX3RpdGxlX19hcnRpY2xlJylcclxuICAgICAgICB0aGlzLnByb2plY3RzVGl0bGVBY3RpdmUgPSAnaG9tZV9fdGl0bGVfX2FydGljbGUtLWFjdGl2ZSdcclxuXHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwgPSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgICAgICAgIHRhcmdldDogMCxcclxuICAgICAgICAgICAgc3RhcnQ6IDAsXHJcbiAgICAgICAgICAgIGxlcnA6IDAuMSxcclxuICAgICAgICAgICAgbGFzdDogMCxcclxuICAgICAgICAgICAgdmVsb2NpdHk6IDFcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3BlZWQgPSB7XHJcbiAgICAgICAgICAgIHRhcmdldDogMCxcclxuICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgbGVycDogMC4xXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3JlYXRlR2VvbWV0cnkoKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlR2FsbGVyeSgpXHJcblxyXG4gICAgICAgIHRoaXMuZ3JvdXAuc2V0UGFyZW50KHRoaXMuc2NlbmUpXHJcblxyXG4gICAgICAgIHRoaXMuc2hvdygpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlR2VvbWV0cnkoKSB7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsLCB7XHJcbiAgICAgICAgICAgIHdpZHRoU2VnbWVudHM6IDIwLFxyXG4gICAgICAgICAgICBoZWlnaHRTZWdtZW50czogMjBcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgY3JlYXRlR2FsbGVyeSgpIHtcclxuICAgICAgICB0aGlzLm1lZGlhcyA9IG1hcCh0aGlzLm1lZGlhc0VsZW1lbnRzLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZWRpYSh7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXHJcbiAgICAgICAgICAgICAgICBpbmRleCxcclxuICAgICAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxyXG4gICAgICAgICAgICAgICAgc2NlbmU6IHRoaXMuZ3JvdXAsXHJcbiAgICAgICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICogQW5pbWF0aW9uc1xyXG4gICAqL1xyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5zaG93KCkpXHJcbiAgICB9XHJcblxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLmhpZGUoKSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudHNcclxuICAgICAqL1xyXG4gICAgb25SZXNpemUoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnNpemVzID0gZXZlbnQuc2l6ZXNcclxuICAgICAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZ2FsbGVyeUVsZW1lbnRXcmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXHJcblxyXG5cclxuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLm9uUmVzaXplKGV2ZW50LCB0aGlzLnNjcm9sbCkpXHJcbiAgICAgICAgdGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmJvdW5kcy53aWR0aCAtIHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGhcclxuICAgIH1cclxuXHJcbiAgICBvblRvdWNoRG93bih7IHgsIHkgfSkge1xyXG4gICAgICAgIHRoaXMuc3BlZWQudGFyZ2V0ID0gMVxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5jdXJyZW50XHJcbiAgICB9XHJcbiAgICBvblRvdWNoTW92ZSh7IHgsIHkgfSkge1xyXG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IHRoaXMuc2Nyb2xsLmxhc3QgLSBkaXN0YW5jZVxyXG4gICAgfVxyXG4gICAgb25Ub3VjaFVwKHsgeCwgeSB9KSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZC50YXJnZXQgPSAwXHJcbiAgICB9XHJcblxyXG4gICAgb25XaGVlbCh7IHBpeGVsWSB9KSB7XHJcbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ICs9IHBpeGVsWVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICpDaGFuZ2luZ1xyXG4gICAgICovXHJcblxyXG4gICAgb25DaGFuZ2UoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXhcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmluZGV4KVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm1lZGlhc0VsZW1lbnRzLmxlbmd0aClcclxuICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5tZWRpYXNFbGVtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuaW5kZXggLSAxXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUHJvamVjdCA9IHBhcnNlSW50KHRoaXMubWVkaWFzRWxlbWVudHNbdGhpcy5pbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JykpXHJcblxyXG4gICAgICAgIG1hcCh0aGlzLnByb2plY3RzRWxlbWVudHMsIChlbGVtZW50LCBlbGVtZW50SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZWxlbWVudEluZGV4LCBzZWxlY3RlZFByb2plY3QpXHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudEluZGV4ID09PSBzZWxlY3RlZFByb2plY3QpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLnByb2plY3RzRWxlbWVudHNBY3RpdmUpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5wcm9qZWN0c0VsZW1lbnRzQWN0aXZlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcblxyXG5cclxuICAgICAgICBtYXAodGhpcy5wcm9qZWN0c1RpdGxlLCAoZWxlbWVudCwgZWxlbWVudEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZW1lbnRJbmRleCwgc2VsZWN0ZWRQcm9qZWN0KVxyXG5cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRJbmRleCA9PT0gc2VsZWN0ZWRQcm9qZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5wcm9qZWN0c1RpdGxlQWN0aXZlKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMucHJvamVjdHNUaXRsZUFjdGl2ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVUERBVEVcclxuICAgICAqL1xyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYm91bmRzKSByZXR1cm5cclxuXHJcblxyXG5cclxuICAgICAgICB0aGlzLnNwZWVkLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc3BlZWQuY3VycmVudCwgdGhpcy5zcGVlZC50YXJnZXQsIHRoaXMuc3BlZWQubGVycClcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gR1NBUC51dGlscy5jbGFtcCgtdGhpcy5zY3JvbGwubGltaXQsIDAsIHRoaXMuc2Nyb2xsLnRhcmdldClcclxuICAgICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIHRoaXMuc2Nyb2xsLmxlcnApXHJcblxyXG4gICAgICAgIHRoaXMuZ2FsbGVyeUVsZW1lbnQuc3R5bGVbdGhpcy50cmFuc2Zvcm1QcmVmaXhdID0gYHRyYW5zbGF0ZVgoJHt0aGlzLnNjcm9sbC5jdXJyZW50fXB4KWBcclxuXHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5jdXJyZW50XHJcblxyXG5cclxuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5hYnModGhpcy5zY3JvbGwuY3VycmVudCAvIHRoaXMuc2Nyb2xsLmxpbWl0KSAqIHRoaXMubWVkaWFzLmxlbmd0aClcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmluZGV4ICE9PSBpbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGluZGV4KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhLnVwZGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNwZWVkLmN1cnJlbnQsIHRoaXMuaW5kZXgpXHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWRzdHJveVxyXG4gICAgICovXHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBNZXNoLCBQcm9ncmFtfSBmcm9tICdvZ2wnXHJcblxyXG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnc2hhZGVycy9wbGFuZS1mcmFnbWVudC5nbHNsJ1xyXG5pbXBvcnQgdmVydGV4IGZyb20gJ3NoYWRlcnMvcGxhbmUtdmVydGV4Lmdsc2wnXHJcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGVsZW1lbnQsIGdlb21ldHJ5LCBnbCwgaW5kZXgsIHNjZW5lLCBzaXplcyB9KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBnZW9tZXRyeVxyXG4gICAgICAgIHRoaXMuZ2wgPSBnbFxyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxyXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleFxyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHR1cmUoKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlUHJvZ3JhbSgpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNZXNoKClcclxuXHJcbiAgICAgICAgdGhpcy5leHRyYSA9IHtcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUZXh0dXJlKCkge1xyXG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpXHJcblxyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHdpbmRvdy5URVhUVVJFU1tpbWFnZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJyldXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUHJvZ3JhbSgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gbmV3IFByb2dyYW0odGhpcy5nbCwge1xyXG4gICAgICAgICAgICBmcmFnbWVudCxcclxuICAgICAgICAgICAgdmVydGV4LFxyXG4gICAgICAgICAgICB1bmlmb3Jtczoge1xyXG4gICAgICAgICAgICAgICAgdUFscGhhOiB7IHZhbHVlOiAwIH0sXHJcbiAgICAgICAgICAgICAgICB0TWFwOiB7IHZhbHVlOiB0aGlzLnRleHR1cmUgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlTWVzaCgpIHtcclxuICAgICAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaCh0aGlzLmdsLCB7XHJcbiAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxyXG4gICAgICAgICAgICBwcm9ncmFtOiB0aGlzLnByb2dyYW1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLm1lc2guc2V0UGFyZW50KHRoaXMuc2NlbmUpXHJcblxyXG4gICAgICAgIC8vIHRoaXMubWVzaC5yb3RhdGlvbi56ID0gR1NBUC51dGlscy5yYW5kb20oLU1hdGguUEkgKiAxLjAzLCBNYXRoLlBJICogMC4wMylcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCb3VuZHMoeyBzaXplcyB9KSB7XHJcbiAgICAgICAgdGhpcy5zaXplcyA9IHNpemVzXHJcblxyXG4gICAgICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlU2NhbGUoKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWCgpXHJcbiAgICAgICAgdGhpcy51cGRhdGVZKClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogXHJcbiAgICAqIEFuaW1hdGlvbnNcclxuICAgICovXHJcblxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgR1NBUC5mcm9tVG8odGhpcy5wcm9ncmFtLnVuaWZvcm1zLnVBbHBoYSwge1xyXG4gICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgdmFsdWU6IDFcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgR1NBUC50byh0aGlzLnByb2dyYW0udW5pZm9ybXMudUFscGhhLCB7XHJcbiAgICAgICAgICAgIHZhbHVlOiAwXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICAvKipcclxuICAgICAgKiBFdmVudHNcclxuICAgICAgKi9cclxuICAgIG9uUmVzaXplKHNpemVzLCBzY3JvbGwpIHtcclxuICAgICAgICB0aGlzLmV4dHJhID0gMFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQm91bmRzKHNpemVzKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWChzY3JvbGwpXHJcbiAgICAgICAgdGhpcy51cGRhdGVZKDApXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMT09QXHJcbiAgICAgKi9cclxuXHJcbiAgICB1cGRhdGVSb3RhdGlvbigpIHtcclxuICAgICAgICB0aGlzLm1lc2gucm90YXRpb24ueiA9IEdTQVAudXRpbHMubWFwUmFuZ2UoXHJcbiAgICAgICAgICAgIC10aGlzLnNpemVzLndpZHRoIC8gMixcclxuICAgICAgICAgICAgdGhpcy5zaXplcy53aWR0aCAvIDIsXHJcbiAgICAgICAgICAgIE1hdGguUEkgKiAwLjEsXHJcbiAgICAgICAgICAgIC1NYXRoLlBJICogMC4xLFxyXG4gICAgICAgICAgICB0aGlzLm1lc2gucG9zaXRpb24ueFxyXG4gICAgICAgIClcclxuICAgIH1cclxuICAgIHVwZGF0ZVNjYWxlKCkge1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmJvdW5kcy53aWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoXHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmJvdW5kcy5oZWlnaHQgLyB3aW5kb3cuaW5uZXJIZWlnaHRcclxuXHJcbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnggPSB0aGlzLnNpemVzLndpZHRoICogdGhpcy53aWR0aFxyXG4gICAgICAgIHRoaXMubWVzaC5zY2FsZS55ID0gdGhpcy5zaXplcy5oZWlnaHQgKiB0aGlzLmhlaWdodFxyXG5cclxuXHJcbiAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVYKHggPSAwKSB7XHJcbiAgICAgICAgdGhpcy54ID0gKHRoaXMuYm91bmRzLmxlZnQgKyB4KSAvIHdpbmRvdy5pbm5lcldpZHRoXHJcbiAgICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLnggPSAoLXRoaXMuc2l6ZXMud2lkdGggLyAyKSArICh0aGlzLm1lc2guc2NhbGUueCAvIDIpICsgKHRoaXMueCAqIHRoaXMuc2l6ZXMud2lkdGgpICsgdGhpcy5leHRyYVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVkoeSA9IDApIHtcclxuICAgICAgICB0aGlzLnkgPSAodGhpcy5ib3VuZHMudG9wICsgeSkgLyB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB0aGlzLm1lc2gucG9zaXRpb24ueSA9ICh0aGlzLnNpemVzLmhlaWdodCAvIDIpIC0gKHRoaXMubWVzaC5zY2FsZS55IC8gMikgLSAodGhpcy55ICogdGhpcy5zaXplcy5oZWlnaHQpXHJcblxyXG4gICAgICAgIC8vKlJPVEFUSU9OXHJcbiAgICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLnkgKz0gTWF0aC5jb3MoKHRoaXMubWVzaC5wb3NpdGlvbi54IC8gdGhpcy5zaXplcy53aWR0aCkgKiBNYXRoLlBJICogMC4xKSAqIDQwIC0gNDBcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoc2Nyb2xsKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJvdW5kcykgcmV0dXJuXHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlUm90YXRpb24oKVxyXG4gICAgICAgIHRoaXMudXBkYXRlU2NhbGUoKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWChzY3JvbGwpXHJcbiAgICAgICAgdGhpcy51cGRhdGVZKDApXHJcbiAgICB9XHJcblxyXG5cclxufSIsImltcG9ydCB7IG1hcCB9IGZyb20gXCJsb2Rhc2hcIlxyXG5pbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSBcIm9nbFwiXHJcbmltcG9ydCBHYWxsZXJ5IGZyb20gXCIuL0dhbGxlcnlcIlxyXG5pbXBvcnQgUGljdHVyZSBmcm9tIFwiLi9QaWN0dXJlXCJcclxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgZ2wsIHNjZW5lLCBzaXplcywgdHJhbnNpdGlvbiB9KSB7XHJcbiAgICAgICAgdGhpcy5pZCA9ICdwcm9qZWN0J1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNjZW5lKVxyXG4gICAgICAgIHRoaXMuZ2wgPSBnbFxyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xyXG5cclxuICAgICAgICB0aGlzLmdyb3VwID0gbmV3IFRyYW5zZm9ybSgpXHJcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gdHJhbnNpdGlvblxyXG4gICAgICAgIHRoaXMuY3JlYXRlR2VvbWV0cnkoKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlR2FsbGVyaWVzKClcclxuXHJcbiAgICAgICAgdGhpcy5ncm91cC5zZXRQYXJlbnQoc2NlbmUpXHJcblxyXG4gICAgICAgIHRoaXMuc2hvdygpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlR2VvbWV0cnkoKSB7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsKVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUdhbGxlcmllcygpIHtcclxuXHJcbiAgICAgICAgdGhpcy5QaWN0dXJlID0gbmV3IFBpY3R1cmUoeyBnbDogdGhpcy5nbCwgc2NlbmU6IHRoaXMuc2NlbmUsIHNpemVzOiB0aGlzLnNpemVzLCB0cmFuc2l0aW9uOiB0aGlzLnRyYW5zaXRpb24gfSlcclxuICAgICAgICB0aGlzLmdhbGxlcmllc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3RfX21vYmlsZScpXHJcblxyXG4gICAgICAgIHRoaXMuZ2FsbGVyaWVzID0gbWFwKHRoaXMuZ2FsbGVyaWVzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdhbGxlcnkoe1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxyXG4gICAgICAgICAgICAgICAgaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBnbDogdGhpcy5nbCxcclxuICAgICAgICAgICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxyXG4gICAgICAgICAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgbWFwKHRoaXMuZ2FsbGVyaWVzLCBnYWxsZXJ5ID0+IGdhbGxlcnkuc2hvdygpKVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgbWFwKHRoaXMuZ2FsbGVyaWVzLCBnYWxsZXJ5ID0+IGdhbGxlcnkuaGlkZSgpKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50c1xyXG4gICAgICovXHJcbiAgICBvblJlc2l6ZShldmVudCkge1xyXG4gICAgICAgIG1hcCh0aGlzLmdhbGxlcmllcywgZ2FsbGVyeSA9PiBnYWxsZXJ5Lm9uUmVzaXplKGV2ZW50KSlcclxuICAgIH1cclxuXHJcbiAgICBvblRvdWNoRG93bihldmVudCkge1xyXG4gICAgICAgIG1hcCh0aGlzLmdhbGxlcmllcywgZ2FsbGVyeSA9PiBnYWxsZXJ5Lm9uVG91Y2hEb3duKGV2ZW50KSlcclxuICAgIH1cclxuICAgIG9uVG91Y2hNb3ZlKGV2ZW50KSB7XHJcbiAgICAgICAgbWFwKHRoaXMuZ2FsbGVyaWVzLCBnYWxsZXJ5ID0+IGdhbGxlcnkub25Ub3VjaE1vdmUoZXZlbnQpKVxyXG4gICAgfVxyXG4gICAgb25Ub3VjaFVwKGV2ZW50KSB7XHJcbiAgICAgICAgbWFwKHRoaXMuZ2FsbGVyaWVzLCBnYWxsZXJ5ID0+IGdhbGxlcnkub25Ub3VjaFVwKGV2ZW50KSlcclxuICAgIH1cclxuXHJcbiAgICBvbldoZWVsKHsgcGl4ZWxYLCBwaXhlbFkgfSkge1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVVBEQVRFXHJcbiAgICAgKi9cclxuXHJcbiAgICB1cGRhdGUoc2Nyb2xsKSB7XHJcbiAgICAgICAgbWFwKHRoaXMuZ2FsbGVyaWVzLCBnYWxsZXJ5ID0+IGdhbGxlcnkudXBkYXRlKHNjcm9sbCkpXHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICBtYXAodGhpcy5nYWxsZXJpZXMsIGdhbGxlcnkgPT4gZ2FsbGVyeS5kZXN0cm95KCkpXHJcbiAgICB9XHJcbn0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIwODhmODA2ZDZlOGVhMTk2ODY4ZlwiKSJdLCJuYW1lcyI6WyJNZWRpYSIsImNvbnN0cnVjdG9yIiwiZWxlbWVudCIsImdlb21ldHJ5IiwiZ2wiLCJpbmRleCIsInNjZW5lIiwic2l6ZXMiLCJ0aGlzIiwiY3JlYXRlVGV4dHVyZSIsImNyZWF0ZVByb2dyYW0iLCJjcmVhdGVNZXNoIiwiZXh0cmEiLCJ4IiwieSIsIm9wYWNpdHkiLCJjdXJyZW50IiwidGFyZ2V0IiwibXVsdGlwbGllciIsImxlcnAiLCJpbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0dXJlIiwid2luZG93IiwiVEVYVFVSRVMiLCJnZXRBdHRyaWJ1dGUiLCJwcm9ncmFtIiwiUHJvZ3JhbSIsImZyYWdtZW50IiwidmVydGV4IiwidW5pZm9ybXMiLCJ1QWxwaGEiLCJ2YWx1ZSIsInVTcGVlZCIsInVWaWV3cG9ydFNpemVzIiwid2lkdGgiLCJoZWlnaHQiLCJ0TWFwIiwibWVzaCIsIk1lc2giLCJzZXRQYXJlbnQiLCJzY2FsZSIsImNyZWF0ZUJvdW5kcyIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVwZGF0ZVNjYWxlIiwidXBkYXRlWCIsInVwZGF0ZVkiLCJzaG93IiwiR1NBUCIsImhpZGUiLCJvblJlc2l6ZSIsInNjcm9sbCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImxlZnQiLCJwb3NpdGlvbiIsInRvcCIsInVwZGF0ZSIsInNwZWVkIiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwiZ2FsbGVyeUVsZW1lbnRXcmFwcGVyIiwibWVkaWFzRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdHNFbGVtZW50c0FjdGl2ZSIsInByb2plY3RzRWxlbWVudHMiLCJwcm9qZWN0c1RpdGxlIiwicHJvamVjdHNUaXRsZUFjdGl2ZSIsInRyYW5zZm9ybVByZWZpeCIsIlByZWZpeCIsInN0YXJ0IiwibGFzdCIsInZlbG9jaXR5IiwiY3JlYXRlR2VvbWV0cnkiLCJjcmVhdGVHYWxsZXJ5IiwiUGxhbmUiLCJ3aWR0aFNlZ21lbnRzIiwiaGVpZ2h0U2VnbWVudHMiLCJtZWRpYXMiLCJtYXAiLCJtZWRpYSIsImV2ZW50IiwibGltaXQiLCJjbGllbnRXaWR0aCIsIm9uVG91Y2hEb3duIiwib25Ub3VjaE1vdmUiLCJkaXN0YW5jZSIsImVuZCIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFkiLCJvbkNoYW5nZSIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJzZWxlY3RlZFByb2plY3QiLCJwYXJzZUludCIsImVsZW1lbnRJbmRleCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInN0eWxlIiwiTWF0aCIsImZsb29yIiwiYWJzIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIiwidXBkYXRlUm90YXRpb24iLCJyb3RhdGlvbiIsInoiLCJQSSIsImNvcyIsInRyYW5zaXRpb24iLCJpZCIsImNyZWF0ZUdhbGxlcmllcyIsIlBpY3R1cmUiLCJnYWxsZXJpZXNFbGVtZW50cyIsImdhbGxlcmllcyIsIkdhbGxlcnkiLCJnYWxsZXJ5IiwicGl4ZWxYIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9