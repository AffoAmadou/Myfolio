/*! For license information please see main.407cdec54112ea8f3a7f.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatestarter("main",{"./app/components/Canvas/Home/Media.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var i=s("./node_modules/ogl/src/core/Texture.js"),h=s("./node_modules/ogl/src/core/Program.js"),o=s("./node_modules/ogl/src/core/Mesh.js"),r=s("./app/shaders/plane-fragment.glsl"),n=s("./app/shaders/plane-vertex.glsl"),l=s("./node_modules/gsap/index.js");class a{constructor({element:e,geometry:t,gl:s,index:i,scene:h,sizes:o}){this.element=e,this.geometry=t,this.gl=s,this.scene=h,this.index=i,this.sizes=o,this.createTexture(),this.createProgram(),this.createMesh(),this.extra={x:0,y:0}}createTexture(){this.texture=new i.Texture(this.gl);const e=this.element.querySelector(".home__gallery__media__image");this.image=new window.Image,this.image.crossOrigin="anonymous",this.image.src=e.getAttribute("data-src"),this.image.onload=e=>this.texture.image=this.image}createProgram(){this.program=new h.Program(this.gl,{fragment:r.default,vertex:n.default,uniforms:{uAlpha:{value:0},tMap:{value:this.texture}}})}createMesh(){this.mesh=new o.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene),this.mesh.scale.x=2}createBounds({sizes:e}){this.sizes=e,this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY()}show(){l.default.fromTo(this.program.uniforms.uAlpha,{value:0},{value:1})}hide(){l.default.to(this.program.uniforms.uAlpha,{value:0})}onResize(e,t){this.extra={x:0,y:0},this.createBounds(e),this.updateX(t&&t.x),this.updateY(t&&t.y)}updateScale(){this.width=this.bounds.width/window.innerWidth,this.height=this.bounds.height/window.innerHeight,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}updateX(e=0){this.x=(this.bounds.left+e)/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width+this.extra.x}updateY(e=0){this.y=(this.bounds.top+e)/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height+this.extra.y}update(e){this.bounds&&(this.updateX(e),this.updateY())}}},"./app/components/Canvas/Home/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var i=s("./node_modules/lodash/lodash.js"),h=s("./node_modules/ogl/src/core/Transform.js"),o=s("./node_modules/ogl/src/extras/Plane.js"),r=s("./app/components/Canvas/Home/Media.js"),n=s("./node_modules/prefix/index.js"),l=s.n(n),a=s("./node_modules/gsap/index.js");const c=class{constructor({gl:e,scene:t,sizes:s}){this.gl=e,this.sizes=s,this.scene=t,this.group=new h.Transform,this.galleryElement=document.querySelector(".home__gallery"),this.galleryElementWrapper=document.querySelector(".home__gallery__wrapper"),this.mediasElements=document.querySelectorAll(".home__gallery__media"),this.projectsElementsActive="home__article--active",this.projectsElements=document.querySelectorAll(".home__article"),this.projectsTitle=document.querySelectorAll(".home__title__article"),this.projectsTitleActive="home__title__article--active",this.transformPrefix=l()("transform"),this.scroll={current:0,target:0,start:0,lerp:.1,last:0,velocity:1},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new o.Plane(this.gl)}createGallery(){this.medias=(0,i.map)(this.mediasElements,((e,t)=>new r.default({element:e,geometry:this.geometry,index:t,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){(0,i.map)(this.medias,(e=>e.show()))}hide(){(0,i.map)(this.medias,(e=>e.hide()))}onResize(e){this.sizes=e.sizes,this.bounds=this.galleryElementWrapper.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,(0,i.map)(this.medias,(t=>t.onResize(e,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:e,y:t}){this.scroll.last=this.scroll.current}onTouchMove({x:e,y:t}){const s=e.start-e.end;this.scroll.target=this.scroll.last-s}onTouchUp({x:e,y:t}){}onWheel({pixelY:e}){this.scroll.target+=e}onChange(e){this.index=e,console.log(this.mediasElements.length),this.index===this.mediasElements.length&&(this.index=this.index-1);const t=parseInt(this.mediasElements[this.index].getAttribute("data-index"));(0,i.map)(this.projectsElements,((e,s)=>{s===t?e.classList.add(this.projectsElementsActive):e.classList.remove(this.projectsElementsActive)})),(0,i.map)(this.projectsTitle,((e,s)=>{console.log(s,t),s===t?e.classList.add(this.projectsTitleActive):e.classList.remove(this.projectsTitleActive)}))}update(){if(!this.bounds)return;this.scroll.target=a.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=a.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.galleryElement.style[this.transformPrefix]=`translateX(${this.scroll.current}px)`,this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current,(0,i.map)(this.medias,((e,t)=>{e.update(this.scroll.current)}));const e=Math.floor(Math.abs(this.scroll.current/this.scroll.limit)*this.medias.length);this.index!==e&&this.onChange(e)}destroy(){this.scene.removeChild(this.group)}}},"./app/components/Canvas/Project/Gallery.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var i=s("./node_modules/lodash/lodash.js"),h=s("./app/components/Canvas/Project/Media.js"),o=s("./node_modules/gsap/index.js"),r=s("./node_modules/ogl/src/core/Transform.js");class n{constructor({element:e,geometry:t,index:s,gl:i,scene:h,sizes:o}){this.element=e,this.elementWrapper=e.querySelector(".project__mobile__wrapper"),this.geometry=t,this.index=s,this.gl=i,this.scene=h,this.sizes=o,this.group=new r.Transform,this.scroll={current:0,target:0,start:0,lerp:.1,velocity:1},this.createMedias(),this.group.setParent(this.scene)}createMedias(){this.mediasElements=this.element.querySelectorAll(".project__mobile__image"),this.medias=(0,i.map)(this.mediasElements,((e,t)=>new h.default({element:e,geometry:this.geometry,index:t,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){(0,i.map)(this.medias,(e=>e.show()))}hide(){(0,i.map)(this.medias,(e=>e.hide()))}onResize(e){this.bounds=this.elementWrapper.getBoundingClientRect(),this.sizes=e.sizes,this.width=this.bounds.width/window.innerWidth*this.sizes.width,this.scroll.current=this.scroll.target=0,(0,i.map)(this.medias,(t=>t.onResize(e,this.scroll.current)))}onTouchDown({x:e,y:t}){this.scroll.start=this.scroll.current}onTouchMove({x:e,y:t}){const s=e.start-e.end;this.scroll.target=this.scroll.start-s}onTouchUp({x:e,y:t}){}update(e){if(!this.bounds)return;const t=.05*(e.current-e.target),s=e.current/window.innerHeight;this.scroll.current<this.scroll.target?(this.direction="right",this.scroll.velocity=-1):this.scroll.current>this.scroll.target&&(this.direction="left",this.scroll.velocity=1),this.scroll.target-=this.scroll.velocity,this.scroll.target+=t,this.scroll.current=o.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),(0,i.map)(this.medias,((e,t)=>{const s=e.mesh.scale.x/2+.25;if("left"===this.direction){e.mesh.position.x+s<-this.sizes.width/2&&(e.extra+=this.width)}else if("right"===this.direction){e.mesh.position.x-s>this.sizes.width/2&&(e.extra-=this.width)}e.update(this.scroll.current)})),this.group.position.y=s*this.sizes.height}destroy(){this.scene.removeChild(this.group)}}},"./app/components/Canvas/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});s("./node_modules/lodash/lodash.js");var i=s("./node_modules/ogl/src/core/Renderer.js"),h=s("./node_modules/ogl/src/core/Camera.js"),o=s("./node_modules/ogl/src/core/Transform.js"),r=s("./app/components/Canvas/Home/index.js"),n=s("./app/components/Canvas/Project/index.js");class l{constructor({template:e}){this.template=e,this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},this.createRenderer(),this.createCamera(),this.createScene(),this.onResize(),this.onChangeEnd(this.template)}createRenderer(){this.renderer=new i.Renderer({alpha:!0,antialias:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new h.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new o.Transform}createHome(){this.home=new r.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null)}createProject(){this.project=new n.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyProject(){this.project&&(this.project.destroy(),this.project=null)}onChangeStart(){this.home&&this.home.hide(),this.project&&this.project.hide()}onChangeEnd(e){"home"===e?this.createHome():this.destroyHome(),"project"===e?this.createProject():this.destroyProject()}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const e=this.camera.fov*(Math.PI/180),t=2*Math.tan(e/2)*this.camera.position.z,s=t*this.camera.aspect;this.sizes={height:t,width:s};const i={sizes:this.sizes};this.project&&this.project.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(e){this.isDown=!0,this.x.start=e.touches?e.touches[0].clientX:e.clientX,this.y.start=e.touches?e.touches[0].clientY:e.clientY;const t={x:this.x,y:this.y};this.project&&this.project.onTouchDown(t),this.home&&this.home.onTouchDown(t)}onTouchMove(e){if(!this.isDown)return;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.project&&this.project.onTouchMove(i),this.home&&this.home.onTouchMove(i)}onTouchUp(e){this.isDown=!1;const t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,s=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.project&&this.project.onTouchUp(i),this.home&&this.home.onTouchUp(i)}onWheel(e){this.home&&this.home.onWheel(e)}update(e){this.project&&this.project.update(e),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}},"./styles/index.scss":(e,t,s)=>{s.r(t);var i=s("./node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js")(e.id,{publicPath:"",locals:!1});e.hot.dispose(i),e.hot.accept(void 0,i)}},(function(e){e.h=()=>"f18e828e0d44589d9a14"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsV0FBYSxHQUFHLFFBQVMsSUFDeklELEVBQU9FLElBQUlDLFFBQVFKLEdBQ25CQyxFQUFPRSxJQUFJRSxZQUFPQyxFQUFXTixrQkNObkNPLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdGFydGVyLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0hvbWUvTWVkaWEuanMiLCJ3ZWJwYWNrOi8vc3RhcnRlci8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL3N0YXJ0ZXIvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvUHJvamVjdC9HYWxsZXJ5LmpzIiwid2VicGFjazovL3N0YXJ0ZXIvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc3RhcnRlci8uL3N0eWxlcy9pbmRleC5zY3NzP2YwZmYiLCJ3ZWJwYWNrOi8vc3RhcnRlci93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWVzaCwgUHJvZ3JhbSwgVGV4dHVyZSB9IGZyb20gJ29nbCdcclxuXHJcbmltcG9ydCBmcmFnbWVudCBmcm9tICdzaGFkZXJzL3BsYW5lLWZyYWdtZW50Lmdsc2wnXHJcbmltcG9ydCB2ZXJ0ZXggZnJvbSAnc2hhZGVycy9wbGFuZS12ZXJ0ZXguZ2xzbCdcclxuXHJcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGVsZW1lbnQsIGdlb21ldHJ5LCBnbCwgaW5kZXgsIHNjZW5lLCBzaXplcyB9KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBnZW9tZXRyeVxyXG4gICAgICAgIHRoaXMuZ2wgPSBnbFxyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxyXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleFxyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHR1cmUoKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlUHJvZ3JhbSgpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNZXNoKClcclxuXHJcbiAgICAgICAgdGhpcy5leHRyYSA9IHtcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNyZWF0ZVRleHR1cmUoKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5nbClcclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2dhbGxlcnlfX21lZGlhX19pbWFnZScpXHJcblxyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgd2luZG93LkltYWdlKClcclxuICAgICAgICB0aGlzLmltYWdlLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cydcclxuICAgICAgICB0aGlzLmltYWdlLnNyYyA9IGltYWdlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKVxyXG4gICAgICAgIHRoaXMuaW1hZ2Uub25sb2FkID0gXyA9PiAodGhpcy50ZXh0dXJlLmltYWdlID0gdGhpcy5pbWFnZSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVQcm9ncmFtKCkge1xyXG5cclxuICAgICAgICB0aGlzLnByb2dyYW0gPSBuZXcgUHJvZ3JhbSh0aGlzLmdsLCB7XHJcbiAgICAgICAgICAgIGZyYWdtZW50LFxyXG4gICAgICAgICAgICB2ZXJ0ZXgsXHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB7XHJcbiAgICAgICAgICAgICAgICB1QWxwaGE6IHsgdmFsdWU6IDAgfSxcclxuICAgICAgICAgICAgICAgIHRNYXA6IHsgdmFsdWU6IHRoaXMudGV4dHVyZSB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVNZXNoKCkge1xyXG4gICAgICAgIHRoaXMubWVzaCA9IG5ldyBNZXNoKHRoaXMuZ2wsIHtcclxuICAgICAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXHJcbiAgICAgICAgICAgIHByb2dyYW06IHRoaXMucHJvZ3JhbVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMubWVzaC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcclxuXHJcbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnggPSAyXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQm91bmRzKHsgc2l6ZXMgfSkge1xyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xyXG5cclxuICAgICAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVNjYWxlKClcclxuICAgICAgICB0aGlzLnVwZGF0ZVgoKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWSgpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEFuaW1hdGlvbnNcclxuICAgICAqL1xyXG5cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIEdTQVAuZnJvbVRvKHRoaXMucHJvZ3JhbS51bmlmb3Jtcy51QWxwaGEsIHtcclxuICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIHZhbHVlOiAxXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIEdTQVAudG8odGhpcy5wcm9ncmFtLnVuaWZvcm1zLnVBbHBoYSwge1xyXG4gICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAgKiBFdmVudHNcclxuICAgICAgKi9cclxuICAgIG9uUmVzaXplKHNpemVzLCBzY3JvbGwpIHtcclxuICAgICAgICB0aGlzLmV4dHJhID0ge1xyXG4gICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICB5OiAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQm91bmRzKHNpemVzKVxyXG4gICAgICAgIHRoaXMudXBkYXRlWChzY3JvbGwgJiYgc2Nyb2xsLngpXHJcbiAgICAgICAgdGhpcy51cGRhdGVZKHNjcm9sbCAmJiBzY3JvbGwueSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExPT1BcclxuICAgICAqL1xyXG4gICAgdXBkYXRlU2NhbGUoKSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuYm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGhcclxuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuYm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodFxyXG5cclxuICAgICAgICB0aGlzLm1lc2guc2NhbGUueCA9IHRoaXMuc2l6ZXMud2lkdGggKiB0aGlzLndpZHRoXHJcbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnkgPSB0aGlzLnNpemVzLmhlaWdodCAqIHRoaXMuaGVpZ2h0XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlWCh4ID0gMCkge1xyXG4gICAgICAgIHRoaXMueCA9ICh0aGlzLmJvdW5kcy5sZWZ0ICsgeCkgLyB3aW5kb3cuaW5uZXJXaWR0aFxyXG4gICAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi54ID0gKC10aGlzLnNpemVzLndpZHRoIC8gMikgKyAodGhpcy5tZXNoLnNjYWxlLnggLyAyKSArICh0aGlzLnggKiB0aGlzLnNpemVzLndpZHRoKSArIHRoaXMuZXh0cmEueFxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVkoeSA9IDApIHtcclxuICAgICAgICB0aGlzLnkgPSAodGhpcy5ib3VuZHMudG9wICsgeSkgLyB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB0aGlzLm1lc2gucG9zaXRpb24ueSA9ICh0aGlzLnNpemVzLmhlaWdodCAvIDIpIC0gKHRoaXMubWVzaC5zY2FsZS55IC8gMikgLSAodGhpcy55ICogdGhpcy5zaXplcy5oZWlnaHQpICsgdGhpcy5leHRyYS55XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHNjcm9sbCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ib3VuZHMpIHJldHVyblxyXG4gICAgICAgIHRoaXMudXBkYXRlWChzY3JvbGwpXHJcbiAgICAgICAgdGhpcy51cGRhdGVZKClcclxuICAgIH1cclxufSIsImltcG9ydCB7IG1hcCB9IGZyb20gXCJsb2Rhc2hcIlxyXG5pbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSBcIm9nbFwiXHJcbmltcG9ydCBNZWRpYSBmcm9tIFwiLi9NZWRpYVwiXHJcbmltcG9ydCBQcmVmaXggZnJvbSBcInByZWZpeFwiXHJcblxyXG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoeyBnbCwgc2NlbmUsIHNpemVzIH0pIHtcclxuICAgICAgICB0aGlzLmdsID0gZ2xcclxuICAgICAgICB0aGlzLnNpemVzID0gc2l6ZXNcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmVcclxuXHJcbiAgICAgICAgdGhpcy5ncm91cCA9IG5ldyBUcmFuc2Zvcm0oKVxyXG5cclxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2dhbGxlcnknKVxyXG5cclxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50V3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19nYWxsZXJ5X193cmFwcGVyJylcclxuXHJcblxyXG5cclxuICAgICAgICB0aGlzLm1lZGlhc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvbWVfX2dhbGxlcnlfX21lZGlhJylcclxuXHJcblxyXG4gICAgICAgIHRoaXMucHJvamVjdHNFbGVtZW50c0FjdGl2ZSA9ICdob21lX19hcnRpY2xlLS1hY3RpdmUnXHJcbiAgICAgICAgdGhpcy5wcm9qZWN0c0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvbWVfX2FydGljbGUnKVxyXG5cclxuICAgICAgICB0aGlzLnByb2plY3RzVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaG9tZV9fdGl0bGVfX2FydGljbGUnKVxyXG4gICAgICAgIHRoaXMucHJvamVjdHNUaXRsZUFjdGl2ZSA9ICdob21lX190aXRsZV9fYXJ0aWNsZS0tYWN0aXZlJ1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1QcmVmaXggPSBQcmVmaXgoJ3RyYW5zZm9ybScpO1xyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbCA9IHtcclxuICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgdGFyZ2V0OiAwLFxyXG4gICAgICAgICAgICBzdGFydDogMCxcclxuICAgICAgICAgICAgbGVycDogMC4xLFxyXG4gICAgICAgICAgICBsYXN0OiAwLFxyXG4gICAgICAgICAgICB2ZWxvY2l0eTogMVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVHYWxsZXJ5KClcclxuXHJcbiAgICAgICAgdGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcclxuXHJcbiAgICAgICAgdGhpcy5zaG93KClcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVHZW9tZXRyeSgpIHtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wpXHJcbiAgICB9XHJcbiAgICBjcmVhdGVHYWxsZXJ5KCkge1xyXG4gICAgICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lZGlhKHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcclxuICAgICAgICAgICAgICAgIGluZGV4LFxyXG4gICAgICAgICAgICAgICAgZ2w6IHRoaXMuZ2wsXHJcbiAgICAgICAgICAgICAgICBzY2VuZTogdGhpcy5ncm91cCxcclxuICAgICAgICAgICAgICAgIHNpemVzOiB0aGlzLnNpemVzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgKiBBbmltYXRpb25zXHJcbiAgICovXHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLnNob3coKSlcclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuaGlkZSgpKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50c1xyXG4gICAgICovXHJcbiAgICBvblJlc2l6ZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBldmVudC5zaXplc1xyXG4gICAgICAgIHRoaXMuYm91bmRzID0gdGhpcy5nYWxsZXJ5RWxlbWVudFdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9IDBcclxuXHJcblxyXG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEub25SZXNpemUoZXZlbnQsIHRoaXMuc2Nyb2xsKSlcclxuICAgICAgICB0aGlzLnNjcm9sbC5saW1pdCA9IHRoaXMuYm91bmRzLndpZHRoIC0gdGhpcy5tZWRpYXNbMF0uZWxlbWVudC5jbGllbnRXaWR0aFxyXG4gICAgfVxyXG5cclxuICAgIG9uVG91Y2hEb3duKHsgeCwgeSB9KSB7XHJcbiAgICAgICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnRcclxuICAgIH1cclxuICAgIG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB4LnN0YXJ0IC0geC5lbmRcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwubGFzdCAtIGRpc3RhbmNlXHJcbiAgICB9XHJcbiAgICBvblRvdWNoVXAoeyB4LCB5IH0pIHsgfVxyXG5cclxuICAgIG9uV2hlZWwoeyBwaXhlbFkgfSkge1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBwaXhlbFlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAqQ2hhbmdpbmdcclxuICAgICAqL1xyXG5cclxuICAgIG9uQ2hhbmdlKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbmRleClcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5tZWRpYXNFbGVtZW50cy5sZW5ndGgpXHJcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPT09IHRoaXMubWVkaWFzRWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmluZGV4IC0gMVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzZWxlY3RlZFByb2plY3QgPSBwYXJzZUludCh0aGlzLm1lZGlhc0VsZW1lbnRzW3RoaXMuaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcpKVxyXG5cclxuICAgICAgICBtYXAodGhpcy5wcm9qZWN0c0VsZW1lbnRzLCAoZWxlbWVudCwgZWxlbWVudEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVsZW1lbnRJbmRleCwgc2VsZWN0ZWRQcm9qZWN0KVxyXG5cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRJbmRleCA9PT0gc2VsZWN0ZWRQcm9qZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5wcm9qZWN0c0VsZW1lbnRzQWN0aXZlKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMucHJvamVjdHNFbGVtZW50c0FjdGl2ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuXHJcbiAgICAgICAgbWFwKHRoaXMucHJvamVjdHNUaXRsZSwgKGVsZW1lbnQsIGVsZW1lbnRJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50SW5kZXgsIHNlbGVjdGVkUHJvamVjdClcclxuXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50SW5kZXggPT09IHNlbGVjdGVkUHJvamVjdCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMucHJvamVjdHNUaXRsZUFjdGl2ZSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnByb2plY3RzVGl0bGVBY3RpdmUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVVBEQVRFXHJcbiAgICAgKi9cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJvdW5kcykgcmV0dXJuXHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoLXRoaXMuc2Nyb2xsLmxpbWl0LCAwLCB0aGlzLnNjcm9sbC50YXJnZXQpXHJcbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5zY3JvbGwudGFyZ2V0LCB0aGlzLnNjcm9sbC5sZXJwKVxyXG5cclxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50LnN0eWxlW3RoaXMudHJhbnNmb3JtUHJlZml4XSA9IGB0cmFuc2xhdGVYKCR7dGhpcy5zY3JvbGwuY3VycmVudH1weClgXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbC5sYXN0IDwgdGhpcy5zY3JvbGwuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAncmlnaHQnXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbC5sYXN0ID4gdGhpcy5zY3JvbGwuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAnbGVmdCdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5jdXJyZW50XHJcblxyXG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zdCBzY2FsZVggPSBtZWRpYS5tZXNoLnNjYWxlLnggLyAyXHJcblxyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5zY3JvbGwuZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHggPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnggKyBzY2FsZVhcclxuXHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoeCA8IC10aGlzLnNpemVzLndpZHRoIC8gMikge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIG1lZGlhLmV4dHJhLnggKz0gdGhpcy5zaXplcy53aWR0aFxyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIGVsc2UgaWYgKHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgeCA9IG1lZGlhLm1lc2gucG9zaXRpb24ueCAtIHNjYWxlWFxyXG5cclxuICAgICAgICAgICAgLy8gICAgIGlmICh4ID4gdGhpcy5zaXplcy53aWR0aCAvIDIpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBtZWRpYS5leHRyYS54IC09IHRoaXMuc2l6ZXMud2lkdGhcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5hYnModGhpcy5zY3JvbGwuY3VycmVudCAvIHRoaXMuc2Nyb2xsLmxpbWl0KSAqIHRoaXMubWVkaWFzLmxlbmd0aClcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmluZGV4ICE9PSBpbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGluZGV4KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRGVkc3Ryb3lcclxuICAgICAqL1xyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgbWFwIH0gZnJvbSBcImxvZGFzaFwiXHJcbmltcG9ydCBNZWRpYSBmcm9tIFwiLi9NZWRpYVwiXHJcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXHJcbmltcG9ydCB7IFRyYW5zZm9ybSB9IGZyb20gXCJvZ2xcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FsbGVyeSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGVsZW1lbnQsIGdlb21ldHJ5LCBpbmRleCwgZ2wsIHNjZW5lLCBzaXplcyB9KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuZWxlbWVudFdyYXBwZXIgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0X19tb2JpbGVfX3dyYXBwZXInKVxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBnZW9tZXRyeVxyXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleFxyXG4gICAgICAgIHRoaXMuZ2wgPSBnbFxyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xyXG5cclxuICAgICAgICB0aGlzLmdyb3VwID0gbmV3IFRyYW5zZm9ybSgpXHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsID0ge1xyXG4gICAgICAgICAgICBjdXJyZW50OiAwLFxyXG4gICAgICAgICAgICB0YXJnZXQ6IDAsXHJcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxyXG4gICAgICAgICAgICBsZXJwOiAwLjEsXHJcbiAgICAgICAgICAgIHZlbG9jaXR5OiAxXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZU1lZGlhcygpXHJcblxyXG4gICAgICAgIHRoaXMuZ3JvdXAuc2V0UGFyZW50KHRoaXMuc2NlbmUpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlTWVkaWFzKCkge1xyXG4gICAgICAgIHRoaXMubWVkaWFzRWxlbWVudHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3RfX21vYmlsZV9faW1hZ2UnKVxyXG4gICAgICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lZGlhKHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcclxuICAgICAgICAgICAgICAgIGluZGV4LFxyXG4gICAgICAgICAgICAgICAgZ2w6IHRoaXMuZ2wsXHJcbiAgICAgICAgICAgICAgICBzY2VuZTogdGhpcy5ncm91cCxcclxuICAgICAgICAgICAgICAgIHNpemVzOiB0aGlzLnNpemVzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuc2hvdygpKVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5oaWRlKCkpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBFdmVudHNcclxuICAgICovXHJcbiAgICBvblJlc2l6ZShldmVudCkge1xyXG5cclxuICAgICAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZWxlbWVudFdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuXHJcbiAgICAgICAgdGhpcy5zaXplcyA9IGV2ZW50LnNpemVzXHJcblxyXG4gICAgICAgIHRoaXMud2lkdGggPSAodGhpcy5ib3VuZHMud2lkdGggLyB3aW5kb3cuaW5uZXJXaWR0aCkgKiB0aGlzLnNpemVzLndpZHRoXHJcblxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXHJcblxyXG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiBtZWRpYS5vblJlc2l6ZShldmVudCwgdGhpcy5zY3JvbGwuY3VycmVudCkpXHJcbiAgICB9XHJcblxyXG4gICAgb25Ub3VjaERvd24oeyB4LCB5IH0pIHtcclxuICAgICAgICB0aGlzLnNjcm9sbC5zdGFydCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnRcclxuICAgIH1cclxuICAgIG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB4LnN0YXJ0IC0geC5lbmRcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwuc3RhcnQgLSBkaXN0YW5jZVxyXG5cclxuICAgIH1cclxuICAgIG9uVG91Y2hVcCh7IHgsIHkgfSkgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVUERBVEVcclxuICAgICAqL1xyXG5cclxuICAgIHVwZGF0ZShzY3JvbGwpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYm91bmRzKSByZXR1cm5cclxuXHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSAoc2Nyb2xsLmN1cnJlbnQgLSBzY3JvbGwudGFyZ2V0KSowLjA1XHJcbiAgICAgICAgY29uc3QgeSA9IHNjcm9sbC5jdXJyZW50IC8gd2luZG93LmlubmVySGVpZ2h0IFxyXG5cclxuICAgICAgICBpZiAodGhpcy5zY3JvbGwuY3VycmVudCA8IHRoaXMuc2Nyb2xsLnRhcmdldCkge1xyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdyaWdodCdcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwudmVsb2NpdHkgPSAtMVxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPiB0aGlzLnNjcm9sbC50YXJnZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAnbGVmdCdcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwudmVsb2NpdHkgPSAxXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0IC09IHRoaXMuc2Nyb2xsLnZlbG9jaXR5IFxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBkaXN0YW5jZVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIHRoaXMuc2Nyb2xsLmxlcnApXHJcblxyXG5cclxuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gbWVkaWEubWVzaC5zY2FsZS54IC8gMiArIDAuMjVcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gbWVkaWEubWVzaC5wb3NpdGlvbi54ICsgc2NhbGVYXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHggPCAtdGhpcy5zaXplcy53aWR0aCAvIDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5leHRyYSArPSB0aGlzLndpZHRoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1lZGlhLm1lc2gucm90YXRpb24ueiA9IEdTQVAudXRpbHMucmFuZG9tKC1NYXRoLlBJICogMC4wMywgTWF0aC5QSSAqIDAuMDMpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnggLSBzY2FsZVhcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoeCA+IHRoaXMuc2l6ZXMud2lkdGggLyAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuZXh0cmEgLT0gdGhpcy53aWR0aFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBtZWRpYS5tZXNoLnJvdGF0aW9uLnogPSBHU0FQLnV0aWxzLnJhbmRvbSgtTWF0aC5QSSAqIDAuMDMsIE1hdGguUEkgKiAwLjAzKVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVkaWEudXBkYXRlKHRoaXMuc2Nyb2xsLmN1cnJlbnQpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5ncm91cC5wb3NpdGlvbi55ID0geSAqIHRoaXMuc2l6ZXMuaGVpZ2h0XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnXHJcbmltcG9ydCB7IENhbWVyYSwgUmVuZGVyZXIsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCdcclxuaW1wb3J0IEhvbWUgZnJvbSAnLi9Ib21lJ1xyXG5pbXBvcnQgUHJvamVjdCBmcm9tICcuL1Byb2plY3QnXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgdGVtcGxhdGUgfSkge1xyXG5cclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGVcclxuXHJcbiAgICAgICAgdGhpcy54ID0ge1xyXG4gICAgICAgICAgICBzdGFydDogMCxcclxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXHJcbiAgICAgICAgICAgIGVuZDogMFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnkgPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxyXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgZW5kOiAwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZVJlbmRlcmVyKClcclxuICAgICAgICB0aGlzLmNyZWF0ZUNhbWVyYSgpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVTY2VuZSgpXHJcblxyXG4gICAgICAgIHRoaXMub25SZXNpemUoKVxyXG5cclxuICAgICAgICB0aGlzLm9uQ2hhbmdlRW5kKHRoaXMudGVtcGxhdGUpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUmVuZGVyZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcih7XHJcbiAgICAgICAgICAgIGFscGhhOiB0cnVlLFxyXG4gICAgICAgICAgICBhbnRpYWxpYXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2wgPSB0aGlzLnJlbmRlcmVyLmdsXHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5nbC5jYW52YXMpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2FtZXJhKCkge1xyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYSh0aGlzLmdsKVxyXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlU2NlbmUoKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBUcmFuc2Zvcm0oKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKipIb21lXHJcbiAgICAqL1xyXG4gICAgY3JlYXRlSG9tZSgpIHtcclxuICAgICAgICB0aGlzLmhvbWUgPSBuZXcgSG9tZSh7XHJcbiAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxyXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcclxuICAgICAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3lIb21lKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ob21lKSByZXR1cm5cclxuICAgICAgICB0aGlzLmhvbWUuZGVzdHJveSgpXHJcbiAgICAgICAgdGhpcy5ob21lID0gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKipQcm9qZWN0XHJcbiAgICAqL1xyXG4gICAgY3JlYXRlUHJvamVjdCgpIHtcclxuICAgICAgICB0aGlzLnByb2plY3QgPSBuZXcgUHJvamVjdCh7XHJcbiAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxyXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcclxuICAgICAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3lQcm9qZWN0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9qZWN0KSByZXR1cm5cclxuICAgICAgICB0aGlzLnByb2plY3QuZGVzdHJveSgpXHJcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gbnVsbFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKipFdmVudHNcclxuICAgICAqL1xyXG5cclxuICAgIG9uQ2hhbmdlU3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaG9tZSkge1xyXG4gICAgICAgICAgICB0aGlzLmhvbWUuaGlkZSgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvamVjdC5oaWRlKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbkNoYW5nZUVuZCh0ZW1wbGF0ZSkge1xyXG5cclxuICAgICAgICBpZiAodGVtcGxhdGUgPT09ICdob21lJykge1xyXG4gICAgICAgICAgICAvLyB0aGlzLmdsLmNhbnZhcy5zdHlsZS56SW5kZXg9IDEwMDBcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVIb21lKClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lIb21lKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ3Byb2plY3QnKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuZ2wuY2FudmFzLnN0eWxlLnpJbmRleD0gXCJcIlxyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVQcm9qZWN0KClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lQcm9qZWN0KClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemUoKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpXHJcblxyXG4gICAgICAgIHRoaXMuY2FtZXJhLnBlcnNwZWN0aXZlKHtcclxuICAgICAgICAgICAgYXNwZWN0OiB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICBjb25zdCBmb3YgPSB0aGlzLmNhbWVyYS5mb3YgKiAoTWF0aC5QSSAvIDE4MCk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gMiAqIE1hdGgudGFuKGZvdiAvIDIpICogdGhpcy5jYW1lcmEucG9zaXRpb24uejtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IGhlaWdodCAqIHRoaXMuY2FtZXJhLmFzcGVjdDtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuc2l6ZXMgPSB7XHJcbiAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgd2lkdGhcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdmFsdWVzID0ge1xyXG4gICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvamVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb2plY3Qub25SZXNpemUodmFsdWVzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaG9tZSkge1xyXG4gICAgICAgICAgICB0aGlzLmhvbWUub25SZXNpemUodmFsdWVzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblRvdWNoRG93bihldmVudCkge1xyXG4gICAgICAgIHRoaXMuaXNEb3duID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMueC5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXHJcbiAgICAgICAgdGhpcy55LnN0YXJ0ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcclxuXHJcbiAgICAgICAgY29uc3QgdmFsdWVzID0ge1xyXG4gICAgICAgICAgICB4OiB0aGlzLngsXHJcbiAgICAgICAgICAgIHk6IHRoaXMueVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvamVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb2plY3Qub25Ub3VjaERvd24odmFsdWVzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaG9tZSkge1xyXG4gICAgICAgICAgICB0aGlzLmhvbWUub25Ub3VjaERvd24odmFsdWVzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblRvdWNoTW92ZShldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0Rvd24pIHJldHVyblxyXG5cclxuICAgICAgICBjb25zdCB4ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCA6IGV2ZW50LmNsaWVudFhcclxuICAgICAgICBjb25zdCB5ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcclxuXHJcbiAgICAgICAgdGhpcy54LmVuZCA9IHhcclxuICAgICAgICB0aGlzLnkuZW5kID0geVxyXG5cclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMueCxcclxuICAgICAgICAgICAgeTogdGhpcy55XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvamVjdC5vblRvdWNoTW92ZSh2YWx1ZXMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ob21lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG9tZS5vblRvdWNoTW92ZSh2YWx1ZXMpXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblRvdWNoVXAoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmlzRG93biA9IGZhbHNlXHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBldmVudC5jaGFuZ2VkVG91Y2hlcyA/IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXHJcbiAgICAgICAgY29uc3QgeSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzID8gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcclxuXHJcbiAgICAgICAgdGhpcy54LmVuZCA9IHhcclxuICAgICAgICB0aGlzLnkuZW5kID0geVxyXG5cclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMueCxcclxuICAgICAgICAgICAgeTogdGhpcy55XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvamVjdC5vblRvdWNoVXAodmFsdWVzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaG9tZSkge1xyXG4gICAgICAgICAgICB0aGlzLmhvbWUub25Ub3VjaFVwKHZhbHVlcylcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgb25XaGVlbChldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhvbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5ob21lLm9uV2hlZWwoZXZlbnQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiAvLyogTE9PUFxyXG4gICAgICovXHJcbiAgICB1cGRhdGUoc2Nyb2xsKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb2plY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9qZWN0LnVwZGF0ZShzY3JvbGwpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ob21lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG9tZS51cGRhdGUoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIoe1xyXG4gICAgICAgICAgICBjYW1lcmE6IHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307XG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgLy8gMTY2NzQyMDUyMjA3OVxuICAgICAgdmFyIGNzc1JlbG9hZCA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9obXIvaG90TW9kdWxlUmVwbGFjZW1lbnQuanNcIikobW9kdWxlLmlkLCB7XCJwdWJsaWNQYXRoXCI6XCJcIixcImxvY2Fsc1wiOmZhbHNlfSk7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoY3NzUmVsb2FkKTtcbiAgICAgIG1vZHVsZS5ob3QuYWNjZXB0KHVuZGVmaW5lZCwgY3NzUmVsb2FkKTtcbiAgICB9XG4gICIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcImYxOGU4MjhlMGQ0NDU4OWQ5YTE0XCIpIl0sIm5hbWVzIjpbIk1lZGlhIiwiY29uc3RydWN0b3IiLCJlbGVtZW50IiwiZ2VvbWV0cnkiLCJnbCIsImluZGV4Iiwic2NlbmUiLCJzaXplcyIsInRoaXMiLCJjcmVhdGVUZXh0dXJlIiwiY3JlYXRlUHJvZ3JhbSIsImNyZWF0ZU1lc2giLCJleHRyYSIsIngiLCJ5IiwidGV4dHVyZSIsIlRleHR1cmUiLCJpbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJ3aW5kb3ciLCJJbWFnZSIsImNyb3NzT3JpZ2luIiwic3JjIiwiZ2V0QXR0cmlidXRlIiwib25sb2FkIiwiXyIsInByb2dyYW0iLCJQcm9ncmFtIiwiZnJhZ21lbnQiLCJ2ZXJ0ZXgiLCJ1bmlmb3JtcyIsInVBbHBoYSIsInZhbHVlIiwidE1hcCIsIm1lc2giLCJNZXNoIiwic2V0UGFyZW50Iiwic2NhbGUiLCJjcmVhdGVCb3VuZHMiLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ1cGRhdGVTY2FsZSIsInVwZGF0ZVgiLCJ1cGRhdGVZIiwic2hvdyIsIkdTQVAiLCJoaWRlIiwib25SZXNpemUiLCJzY3JvbGwiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnQiLCJwb3NpdGlvbiIsInRvcCIsInVwZGF0ZSIsImdyb3VwIiwiVHJhbnNmb3JtIiwiZ2FsbGVyeUVsZW1lbnQiLCJkb2N1bWVudCIsImdhbGxlcnlFbGVtZW50V3JhcHBlciIsIm1lZGlhc0VsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInByb2plY3RzRWxlbWVudHNBY3RpdmUiLCJwcm9qZWN0c0VsZW1lbnRzIiwicHJvamVjdHNUaXRsZSIsInByb2plY3RzVGl0bGVBY3RpdmUiLCJ0cmFuc2Zvcm1QcmVmaXgiLCJQcmVmaXgiLCJjdXJyZW50IiwidGFyZ2V0Iiwic3RhcnQiLCJsZXJwIiwibGFzdCIsInZlbG9jaXR5IiwiY3JlYXRlR2VvbWV0cnkiLCJjcmVhdGVHYWxsZXJ5IiwiUGxhbmUiLCJtZWRpYXMiLCJtYXAiLCJtZWRpYSIsImV2ZW50IiwibGltaXQiLCJjbGllbnRXaWR0aCIsIm9uVG91Y2hEb3duIiwib25Ub3VjaE1vdmUiLCJkaXN0YW5jZSIsImVuZCIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFkiLCJvbkNoYW5nZSIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJzZWxlY3RlZFByb2plY3QiLCJwYXJzZUludCIsImVsZW1lbnRJbmRleCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInN0eWxlIiwiZGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwiYWJzIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIiwiR2FsbGVyeSIsImVsZW1lbnRXcmFwcGVyIiwiY3JlYXRlTWVkaWFzIiwic2NhbGVYIiwiQ2FudmFzIiwidGVtcGxhdGUiLCJjcmVhdGVSZW5kZXJlciIsImNyZWF0ZUNhbWVyYSIsImNyZWF0ZVNjZW5lIiwib25DaGFuZ2VFbmQiLCJyZW5kZXJlciIsIlJlbmRlcmVyIiwiYWxwaGEiLCJhbnRpYWxpYXMiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjYW52YXMiLCJjYW1lcmEiLCJDYW1lcmEiLCJ6IiwiY3JlYXRlSG9tZSIsImhvbWUiLCJIb21lIiwiZGVzdHJveUhvbWUiLCJjcmVhdGVQcm9qZWN0IiwicHJvamVjdCIsIlByb2plY3QiLCJkZXN0cm95UHJvamVjdCIsIm9uQ2hhbmdlU3RhcnQiLCJzZXRTaXplIiwicGVyc3BlY3RpdmUiLCJhc3BlY3QiLCJmb3YiLCJQSSIsInRhbiIsInZhbHVlcyIsImlzRG93biIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsImNoYW5nZWRUb3VjaGVzIiwicmVuZGVyIiwiY3NzUmVsb2FkIiwibW9kdWxlIiwiaWQiLCJob3QiLCJkaXNwb3NlIiwiYWNjZXB0IiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9