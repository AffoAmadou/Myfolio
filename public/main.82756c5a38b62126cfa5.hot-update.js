"use strict";self.webpackHotUpdatestarter("main",{"./app/components/Preloader.js":(t,e,i)=>{i.r(e),i.d(e,{default:()=>l});var s=i("./app/classes/Component.js"),a=i("./node_modules/gsap/index.js"),h=i("./node_modules/ogl/src/core/Texture.js"),r=i("./app/utils/text.js");class l extends s.default{constructor({canvas:t}){super({element:".preloader",elements:{title:".preloader__text",upnumber:".preloader__number__text",downumber:".preloader__reverse__text",overlay:".preloader__overlay",container:".preloader__background"}}),this.canvas=t,window.TEXTURES={},(0,r.split)({element:this.elements.title[0],expression:"<br>"}),(0,r.split)({element:this.elements.title[0],expression:"<br>"}),this.elements.titleSpans=this.elements.title[0].querySelectorAll("span span"),this.length=0,this.createLoader()}createLoader(){window.ASSETS.forEach((t=>{const e=new h.Texture(this.canvas.gl,{generateMipmaps:!1}),i=new window.Image;i.crossOrigin="anonymous",i.src=t,i.onload=t=>{e.image=i,this.onAssetLoaded()},window.TEXTURES[t]=e}))}onAssetLoaded(t){this.length+=1;const e=this.length/window.ASSETS.length;this.elements.upnumber[0].innerHTML=`${Math.round(100*e)}`,this.elements.downumber[0].innerHTML=""+(100-Math.round(100*e)),1===e&&this.onLoaded()}onLoaded(){return new Promise((t=>{this.emit("complete"),this.animateOut=a.default.timeline({delay:1,defaults:{duration:1.5,ease:"power3.inOut"}}),this.animateOut.to([this.elements.upnumber,this.elements.downumber],{autoAlpha:0,y:"-100%"},"myLabel"),this.animateOut.to(this.elements.titleSpans,{delay:.5,autoAlpha:0,y:"-100%"},"myLabel"),this.animateOut.to(this.elements.container,{delay:.5,scaleY:0},"myLabel"),this.animateOut.to(this.elements.overlay,{scaleY:0}),this.animateOut.to(this.element,{scaleY:0,transformOrigin:"100% 100%"}),this.animateOut.call((t=>{this.destroy()}))}))}destroy(){this.element.parentNode.removeChild(this.element)}}},"./node_modules/ogl/src/core/Texture.js":(t,e,i)=>{i.r(e),i.d(e,{Texture:()=>r});const s=new Uint8Array(4);function a(t){return 0==(t&t-1)}let h=1;class r{constructor(t,{image:e,target:i=t.TEXTURE_2D,type:s=t.UNSIGNED_BYTE,format:a=t.RGBA,internalFormat:r=a,wrapS:l=t.CLAMP_TO_EDGE,wrapT:n=t.CLAMP_TO_EDGE,generateMipmaps:g=!0,minFilter:m=(g?t.NEAREST_MIPMAP_LINEAR:t.LINEAR),magFilter:o=t.LINEAR,premultiplyAlpha:p=!1,unpackAlignment:d=4,flipY:u=i==t.TEXTURE_2D,anisotropy:E=0,level:T=0,width:_,height:A=_}={}){this.gl=t,this.id=h++,this.image=e,this.target=i,this.type=s,this.format=a,this.internalFormat=r,this.minFilter=m,this.magFilter=o,this.wrapS=l,this.wrapT=n,this.generateMipmaps=g,this.premultiplyAlpha=p,this.unpackAlignment=d,this.flipY=u,this.anisotropy=Math.min(E,this.gl.renderer.parameters.maxAnisotropy),this.level=T,this.width=_,this.height=A,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(t=0){const e=!(this.image===this.store.image&&!this.needsUpdate);if((e||this.glState.textureUnits[t]!==this.id)&&(this.gl.renderer.activeTexture(t),this.bind()),e){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,this.level,this.internalFormat,this.format,this.type,this.image[t]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let t=0;t<this.image.length;t++)this.gl.compressedTexImage2D(this.target,t,this.internalFormat,this.image[t].width,this.image[t].height,0,this.image[t].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||a(this.image.width)&&a(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s);this.store.image=this.image}}}}},(function(t){t.h=()=>"d628bba00de6fa62bf73"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi44Mjc1NmM1YTM4YjYyMTI2Y2ZhNS5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI2UUFLZSxNQUFNQSxVQUFrQkMsRUFBQUEsUUFDckNDLGFBQWEsT0FBRUMsSUFDYkMsTUFBTSxDQUNKQyxRQUFTLGFBQ1RDLFNBQVUsQ0FDUkMsTUFBTyxtQkFDUEMsU0FBVSwyQkFDVkMsVUFBVyw0QkFDWEMsUUFBUyxzQkFDVEMsVUFBVyw0QkFJZkMsS0FBS1QsT0FBU0EsRUFDZFUsT0FBT0MsU0FBVyxDQUFDLEdBRW5CQyxFQUFBQSxFQUFBQSxPQUFNLENBQ0pWLFFBQVNPLEtBQUtOLFNBQVNDLE1BQU0sR0FDN0JTLFdBQVksVUFHZEQsRUFBQUEsRUFBQUEsT0FBTSxDQUNKVixRQUFTTyxLQUFLTixTQUFTQyxNQUFNLEdBQzdCUyxXQUFZLFNBR2RKLEtBQUtOLFNBQVNXLFdBQWFMLEtBQUtOLFNBQVNDLE1BQU0sR0FBR1csaUJBQWlCLGFBRW5FTixLQUFLTyxPQUFTLEVBRWRQLEtBQUtRLGNBQ04sQ0FFREEsZUFFRVAsT0FBT1EsT0FBT0MsU0FBU0MsSUFDckIsTUFBTUMsRUFBVSxJQUFJQyxFQUFBQSxRQUFRYixLQUFLVCxPQUFPdUIsR0FBSSxDQUMxQ0MsaUJBQWlCLElBR2JDLEVBQVEsSUFBSWYsT0FBT2dCLE1BRXpCRCxFQUFNRSxZQUFjLFlBQ3BCRixFQUFNRyxJQUFNUixFQUVaSyxFQUFNSSxPQUFTQyxJQUNiVCxFQUFRRCxNQUFRSyxFQUVoQmhCLEtBQUtzQixlQUFMLEVBR0ZyQixPQUFPQyxTQUFTUyxHQUFTQyxDQUF6QixHQUVILENBRURVLGNBQWVYLEdBQ2JYLEtBQUtPLFFBQVUsRUFFZixNQUFNZ0IsRUFBVXZCLEtBQUtPLE9BQVNOLE9BQU9RLE9BQU9GLE9BRTVDUCxLQUFLTixTQUFTRSxTQUFTLEdBQUc0QixVQUFhLEdBQUVDLEtBQUtDLE1BQWdCLElBQVZILEtBQ3BEdkIsS0FBS04sU0FBU0csVUFBVSxHQUFHMkIsVUFBYSxJQUFFLElBQU1DLEtB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VUFBWTdELEtBQUtjLEdBQUdpRCxTQU9qQy9ELEtBQUtpSCxVQUFZakgsS0FBS2lILFVBQ3pCLE1BQ0csR0FBSWpILEtBQUttRCxTQUFXbkQsS0FBS2MsR0FBR3dGLGlCQUV4QixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNuQnZHLEtBQUtjLEdBQUcwRixXQUNKeEcsS0FBS2MsR0FBRzJGLDRCQUE4QkYsRUFDdEMsRUFDQXZHLEtBQUtjLEdBQUcwQyxLQUNSLEVBQ0EsRUFDQSxFQUNBeEQsS0FBS2MsR0FBRzBDLEtBQ1J4RCxLQUFLYyxHQUFHd0MsY0FDUlIsUUFHRDlDLEtBQUtzRSxNQUVadEUsS0FBS2MsR0FBRzBGLFdBQVd4RyxLQUFLbUQsT0FBUW5ELEtBQUtxRSxNQUFPckUsS0FBS3lELGVBQWdCekQsS0FBS3NFLE1BQU90RSxLQUFLdUUsT0FBUSxFQUFHdkUsS0FBS3VELE9BQVF2RCxLQUFLcUQsS0FBTSxNQUdySHJELEtBQUtjLEdBQUcwRixXQUFXeEcsS0FBS21ELE9BQVEsRUFBR25ELEtBQUtjLEdBQUcwQyxLQUFNLEVBQUcsRUFBRyxFQUFHeEQsS0FBS2MsR0FBRzBDLEtBQU14RCxLQUFLYyxHQUFHd0MsY0FBZVIsR0FHdkc5QyxLQUFLOEUsTUFBTW5FLE1BQVFYLEtBQUtXLEtBM0hBLENBNEgzQixFLGdCQ3ZOTHVHLEVBQW9CQyxFQUFJLElBQU0sc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdGFydGVyLy4vYXBwL2NvbXBvbmVudHMvUHJlbG9hZGVyLmpzIiwid2VicGFjazovL3N0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvb2dsL3NyYy9jb3JlL1RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vc3RhcnRlci93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbXBvbmVudCBmcm9tICdjbGFzc2VzL0NvbXBvbmVudCdcclxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJ29nbCdcclxuaW1wb3J0IHsgc3BsaXQgfSBmcm9tICd1dGlscy90ZXh0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlbG9hZGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAoeyBjYW52YXMgfSkge1xyXG4gICAgc3VwZXIoe1xyXG4gICAgICBlbGVtZW50OiAnLnByZWxvYWRlcicsXHJcbiAgICAgIGVsZW1lbnRzOiB7XHJcbiAgICAgICAgdGl0bGU6ICcucHJlbG9hZGVyX190ZXh0JyxcclxuICAgICAgICB1cG51bWJlcjogJy5wcmVsb2FkZXJfX251bWJlcl9fdGV4dCcsXHJcbiAgICAgICAgZG93bnVtYmVyOiAnLnByZWxvYWRlcl9fcmV2ZXJzZV9fdGV4dCcsXHJcbiAgICAgICAgb3ZlcmxheTogJy5wcmVsb2FkZXJfX292ZXJsYXknLFxyXG4gICAgICAgIGNvbnRhaW5lcjogJy5wcmVsb2FkZXJfX2JhY2tncm91bmQnXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXNcclxuICAgIHdpbmRvdy5URVhUVVJFUyA9IHt9XHJcblxyXG4gICAgc3BsaXQoe1xyXG4gICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnRzLnRpdGxlWzBdLFxyXG4gICAgICBleHByZXNzaW9uOiAnPGJyPidcclxuICAgIH0pXHJcblxyXG4gICAgc3BsaXQoe1xyXG4gICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnRzLnRpdGxlWzBdLFxyXG4gICAgICBleHByZXNzaW9uOiAnPGJyPidcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5lbGVtZW50cy50aXRsZVNwYW5zID0gdGhpcy5lbGVtZW50cy50aXRsZVswXS5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuIHNwYW4nKVxyXG5cclxuICAgIHRoaXMubGVuZ3RoID0gMFxyXG5cclxuICAgIHRoaXMuY3JlYXRlTG9hZGVyKClcclxuICB9XHJcblxyXG4gIGNyZWF0ZUxvYWRlciAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyh3aW5kb3cuQVNTRVRTKVxyXG4gICAgd2luZG93LkFTU0VUUy5mb3JFYWNoKChpbWFnZSkgPT4ge1xyXG4gICAgICBjb25zdCB0ZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5jYW52YXMuZ2wsIHtcclxuICAgICAgICBnZW5lcmF0ZU1pcG1hcHM6IGZhbHNlXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zdCBtZWRpYSA9IG5ldyB3aW5kb3cuSW1hZ2UoKVxyXG5cclxuICAgICAgbWVkaWEuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJ1xyXG4gICAgICBtZWRpYS5zcmMgPSBpbWFnZVxyXG5cclxuICAgICAgbWVkaWEub25sb2FkID0gXyA9PiB7XHJcbiAgICAgICAgdGV4dHVyZS5pbWFnZSA9IG1lZGlhXHJcblxyXG4gICAgICAgIHRoaXMub25Bc3NldExvYWRlZCgpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHdpbmRvdy5URVhUVVJFU1tpbWFnZV0gPSB0ZXh0dXJlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgb25Bc3NldExvYWRlZCAoaW1hZ2UpIHtcclxuICAgIHRoaXMubGVuZ3RoICs9IDFcclxuXHJcbiAgICBjb25zdCBwZXJjZW50ID0gdGhpcy5sZW5ndGggLyB3aW5kb3cuQVNTRVRTLmxlbmd0aFxyXG5cclxuICAgIHRoaXMuZWxlbWVudHMudXBudW1iZXJbMF0uaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZChwZXJjZW50ICogMTAwKX1gXHJcbiAgICB0aGlzLmVsZW1lbnRzLmRvd251bWJlclswXS5pbm5lckhUTUwgPSBgJHsxMDAgLSBNYXRoLnJvdW5kKHBlcmNlbnQgKiAxMDApfWBcclxuXHJcbiAgICBpZiAocGVyY2VudCA9PT0gMSkge1xyXG4gICAgICB0aGlzLm9uTG9hZGVkKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTG9hZGVkICgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgLy8qIERvcG8gYXZlciBmYXR0byBsJ2FuaW1hemlvbmUgZGkgdXNjaXRhIGZhY2NpbyBsJ2VtaXQgaW4gQVBQIGpzIGNvc2ljaGUgaWwgcHJlbG9hZGVyXHJcbiAgICAgIC8vKiBjb3JyZW50ZSBjaGlhbWkgaWwgZGVzdHJveSBjb3NpIGRhIGVzc2VyZSByaW1vc3NvIGx1aVxyXG5cclxuICAgICAgdGhpcy5lbWl0KCdjb21wbGV0ZScpXHJcblxyXG4gICAgICB0aGlzLmFuaW1hdGVPdXQgPSBHU0FQLnRpbWVsaW5lKHtcclxuICAgICAgICBkZWxheTogMSxcclxuICAgICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgICAgZHVyYXRpb246IDEuNSxcclxuICAgICAgICAgIGVhc2U6ICdwb3dlcjMuaW5PdXQnXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgdGhpcy5hbmltYXRlT3V0LnRvKFt0aGlzLmVsZW1lbnRzLnVwbnVtYmVyLCB0aGlzLmVsZW1lbnRzLmRvd251bWJlcl0sIHtcclxuXHJcbiAgICAgICAgYXV0b0FscGhhOiAwLFxyXG4gICAgICAgIHk6ICctMTAwJSdcclxuICAgICAgfSwgJ215TGFiZWwnKVxyXG5cclxuICAgICAgdGhpcy5hbmltYXRlT3V0LnRvKHRoaXMuZWxlbWVudHMudGl0bGVTcGFucywge1xyXG4gICAgICAgIGRlbGF5OiAwLjUsXHJcbiAgICAgICAgYXV0b0FscGhhOiAwLFxyXG4gICAgICAgIHk6ICctMTAwJSdcclxuICAgICAgfSwgJ215TGFiZWwnKVxyXG5cclxuICAgICAgdGhpcy5hbmltYXRlT3V0LnRvKHRoaXMuZWxlbWVudHMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgZGVsYXk6IDAuNSxcclxuICAgICAgICBzY2FsZVk6IDBcclxuICAgICAgfSwgJ215TGFiZWwnKVxyXG5cclxuICAgICAgdGhpcy5hbmltYXRlT3V0LnRvKHRoaXMuZWxlbWVudHMub3ZlcmxheSwge1xyXG4gICAgICAgIHNjYWxlWTogMFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgdGhpcy5hbmltYXRlT3V0LnRvKHRoaXMuZWxlbWVudCwge1xyXG4gICAgICAgIHNjYWxlWTogMCxcclxuICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICcxMDAlIDEwMCUnXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICB0aGlzLmFuaW1hdGVPdXQuY2FsbChfID0+IHtcclxuICAgICAgICB0aGlzLmRlc3Ryb3koKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGRlc3Ryb3kgKCkge1xyXG4gICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KVxyXG4gIH1cclxufVxyXG4iLCIvLyBUT0RPOiBkZWxldGUgdGV4dHVyZVxuLy8gVE9ETzogdXNlIHRleFN1YkltYWdlMkQgZm9yIHVwZGF0ZXMgKHZpZGVvIG9yIHdoZW4gbG9hZGVkKVxuLy8gVE9ETzogbmVlZD8gZW5jb2RpbmcgPSBsaW5lYXJFbmNvZGluZ1xuLy8gVE9ETzogc3VwcG9ydCBub24tY29tcHJlc3NlZCBtaXBtYXBzIHVwbG9hZHNcblxuY29uc3QgZW1wdHlQaXhlbCA9IG5ldyBVaW50OEFycmF5KDQpO1xuXG5mdW5jdGlvbiBpc1Bvd2VyT2YyKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAmICh2YWx1ZSAtIDEpKSA9PT0gMDtcbn1cblxubGV0IElEID0gMTtcblxuZXhwb3J0IGNsYXNzIFRleHR1cmUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBnbCxcbiAgICAgICAge1xuICAgICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgICB0YXJnZXQgPSBnbC5URVhUVVJFXzJELFxuICAgICAgICAgICAgdHlwZSA9IGdsLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgICAgICBmb3JtYXQgPSBnbC5SR0JBLFxuICAgICAgICAgICAgaW50ZXJuYWxGb3JtYXQgPSBmb3JtYXQsXG4gICAgICAgICAgICB3cmFwUyA9IGdsLkNMQU1QX1RPX0VER0UsXG4gICAgICAgICAgICB3cmFwVCA9IGdsLkNMQU1QX1RPX0VER0UsXG4gICAgICAgICAgICBnZW5lcmF0ZU1pcG1hcHMgPSB0cnVlLFxuICAgICAgICAgICAgbWluRmlsdGVyID0gZ2VuZXJhdGVNaXBtYXBzID8gZ2wuTkVBUkVTVF9NSVBNQVBfTElORUFSIDogZ2wuTElORUFSLFxuICAgICAgICAgICAgbWFnRmlsdGVyID0gZ2wuTElORUFSLFxuICAgICAgICAgICAgcHJlbXVsdGlwbHlBbHBoYSA9IGZhbHNlLFxuICAgICAgICAgICAgdW5wYWNrQWxpZ25tZW50ID0gNCxcbiAgICAgICAgICAgIGZsaXBZID0gdGFyZ2V0ID09IGdsLlRFWFRVUkVfMkQgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICBhbmlzb3Ryb3B5ID0gMCxcbiAgICAgICAgICAgIGxldmVsID0gMCxcbiAgICAgICAgICAgIHdpZHRoLCAvLyB1c2VkIGZvciBSZW5kZXJUYXJnZXRzIG9yIERhdGEgVGV4dHVyZXNcbiAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoLFxuICAgICAgICB9ID0ge31cbiAgICApIHtcbiAgICAgICAgdGhpcy5nbCA9IGdsO1xuICAgICAgICB0aGlzLmlkID0gSUQrKztcblxuICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgdGhpcy5pbnRlcm5hbEZvcm1hdCA9IGludGVybmFsRm9ybWF0O1xuICAgICAgICB0aGlzLm1pbkZpbHRlciA9IG1pbkZpbHRlcjtcbiAgICAgICAgdGhpcy5tYWdGaWx0ZXIgPSBtYWdGaWx0ZXI7XG4gICAgICAgIHRoaXMud3JhcFMgPSB3cmFwUztcbiAgICAgICAgdGhpcy53cmFwVCA9IHdyYXBUO1xuICAgICAgICB0aGlzLmdlbmVyYXRlTWlwbWFwcyA9IGdlbmVyYXRlTWlwbWFwcztcbiAgICAgICAgdGhpcy5wcmVtdWx0aXBseUFscGhhID0gcHJlbXVsdGlwbHlBbHBoYTtcbiAgICAgICAgdGhpcy51bnBhY2tBbGlnbm1lbnQgPSB1bnBhY2tBbGlnbm1lbnQ7XG4gICAgICAgIHRoaXMuZmxpcFkgPSBmbGlwWTtcbiAgICAgICAgdGhpcy5hbmlzb3Ryb3B5ID0gTWF0aC5taW4oYW5pc290cm9weSwgdGhpcy5nbC5yZW5kZXJlci5wYXJhbWV0ZXJzLm1heEFuaXNvdHJvcHkpO1xuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRoaXMuZ2wuY3JlYXRlVGV4dHVyZSgpO1xuXG4gICAgICAgIHRoaXMuc3RvcmUgPSB7XG4gICAgICAgICAgICBpbWFnZTogbnVsbCxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBbGlhcyBmb3Igc3RhdGUgc3RvcmUgdG8gYXZvaWQgcmVkdW5kYW50IGNhbGxzIGZvciBnbG9iYWwgc3RhdGVcbiAgICAgICAgdGhpcy5nbFN0YXRlID0gdGhpcy5nbC5yZW5kZXJlci5zdGF0ZTtcblxuICAgICAgICAvLyBTdGF0ZSBzdG9yZSB0byBhdm9pZCByZWR1bmRhbnQgY2FsbHMgZm9yIHBlci10ZXh0dXJlIHN0YXRlXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7fTtcbiAgICAgICAgdGhpcy5zdGF0ZS5taW5GaWx0ZXIgPSB0aGlzLmdsLk5FQVJFU1RfTUlQTUFQX0xJTkVBUjtcbiAgICAgICAgdGhpcy5zdGF0ZS5tYWdGaWx0ZXIgPSB0aGlzLmdsLkxJTkVBUjtcbiAgICAgICAgdGhpcy5zdGF0ZS53cmFwUyA9IHRoaXMuZ2wuUkVQRUFUO1xuICAgICAgICB0aGlzLnN0YXRlLndyYXBUID0gdGhpcy5nbC5SRVBFQVQ7XG4gICAgICAgIHRoaXMuc3RhdGUuYW5pc290cm9weSA9IDA7XG4gICAgfVxuXG4gICAgYmluZCgpIHtcbiAgICAgICAgLy8gQWxyZWFkeSBib3VuZCB0byBhY3RpdmUgdGV4dHVyZSB1bml0XG4gICAgICAgIGlmICh0aGlzLmdsU3RhdGUudGV4dHVyZVVuaXRzW3RoaXMuZ2xTdGF0ZS5hY3RpdmVUZXh0dXJlVW5pdF0gPT09IHRoaXMuaWQpIHJldHVybjtcbiAgICAgICAgdGhpcy5nbC5iaW5kVGV4dHVyZSh0aGlzLnRhcmdldCwgdGhpcy50ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5nbFN0YXRlLnRleHR1cmVVbml0c1t0aGlzLmdsU3RhdGUuYWN0aXZlVGV4dHVyZVVuaXRdID0gdGhpcy5pZDtcbiAgICB9XG5cbiAgICB1cGRhdGUodGV4dHVyZVVuaXQgPSAwKSB7XG4gICAgICAgIGNvbnN0IG5lZWRzVXBkYXRlID0gISh0aGlzLmltYWdlID09PSB0aGlzLnN0b3JlLmltYWdlICYmICF0aGlzLm5lZWRzVXBkYXRlKTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0ZXh0dXJlIGlzIGJvdW5kIHRvIGl0cyB0ZXh0dXJlIHVuaXRcbiAgICAgICAgaWYgKG5lZWRzVXBkYXRlIHx8IHRoaXMuZ2xTdGF0ZS50ZXh0dXJlVW5pdHNbdGV4dHVyZVVuaXRdICE9PSB0aGlzLmlkKSB7XG4gICAgICAgICAgICAvLyBzZXQgYWN0aXZlIHRleHR1cmUgdW5pdCB0byBwZXJmb3JtIHRleHR1cmUgZnVuY3Rpb25zXG4gICAgICAgICAgICB0aGlzLmdsLnJlbmRlcmVyLmFjdGl2ZVRleHR1cmUodGV4dHVyZVVuaXQpO1xuICAgICAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW5lZWRzVXBkYXRlKSByZXR1cm47XG4gICAgICAgIHRoaXMubmVlZHNVcGRhdGUgPSBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy5mbGlwWSAhPT0gdGhpcy5nbFN0YXRlLmZsaXBZKSB7XG4gICAgICAgICAgICB0aGlzLmdsLnBpeGVsU3RvcmVpKHRoaXMuZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgdGhpcy5mbGlwWSk7XG4gICAgICAgICAgICB0aGlzLmdsU3RhdGUuZmxpcFkgPSB0aGlzLmZsaXBZO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJlbXVsdGlwbHlBbHBoYSAhPT0gdGhpcy5nbFN0YXRlLnByZW11bHRpcGx5QWxwaGEpIHtcbiAgICAgICAgICAgIHRoaXMuZ2wucGl4ZWxTdG9yZWkodGhpcy5nbC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsIHRoaXMucHJlbXVsdGlwbHlBbHBoYSk7XG4gICAgICAgICAgICB0aGlzLmdsU3RhdGUucHJlbXVsdGlwbHlBbHBoYSA9IHRoaXMucHJlbXVsdGlwbHlBbHBoYTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnVucGFja0FsaWdubWVudCAhPT0gdGhpcy5nbFN0YXRlLnVucGFja0FsaWdubWVudCkge1xuICAgICAgICAgICAgdGhpcy5nbC5waXhlbFN0b3JlaSh0aGlzLmdsLlVOUEFDS19BTElHTk1FTlQsIHRoaXMudW5wYWNrQWxpZ25tZW50KTtcbiAgICAgICAgICAgIHRoaXMuZ2xTdGF0ZS51bnBhY2tBbGlnbm1lbnQgPSB0aGlzLnVucGFja0FsaWdubWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1pbkZpbHRlciAhPT0gdGhpcy5zdGF0ZS5taW5GaWx0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLnRhcmdldCwgdGhpcy5nbC5URVhUVVJFX01JTl9GSUxURVIsIHRoaXMubWluRmlsdGVyKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWluRmlsdGVyID0gdGhpcy5taW5GaWx0ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYWdGaWx0ZXIgIT09IHRoaXMuc3RhdGUubWFnRmlsdGVyKSB7XG4gICAgICAgICAgICB0aGlzLmdsLnRleFBhcmFtZXRlcmkodGhpcy50YXJnZXQsIHRoaXMuZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCB0aGlzLm1hZ0ZpbHRlcik7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLm1hZ0ZpbHRlciA9IHRoaXMubWFnRmlsdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMud3JhcFMgIT09IHRoaXMuc3RhdGUud3JhcFMpIHtcbiAgICAgICAgICAgIHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLnRhcmdldCwgdGhpcy5nbC5URVhUVVJFX1dSQVBfUywgdGhpcy53cmFwUyk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLndyYXBTID0gdGhpcy53cmFwUztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLndyYXBUICE9PSB0aGlzLnN0YXRlLndyYXBUKSB7XG4gICAgICAgICAgICB0aGlzLmdsLnRleFBhcmFtZXRlcmkodGhpcy50YXJnZXQsIHRoaXMuZ2wuVEVYVFVSRV9XUkFQX1QsIHRoaXMud3JhcFQpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS53cmFwVCA9IHRoaXMud3JhcFQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hbmlzb3Ryb3B5ICYmIHRoaXMuYW5pc290cm9weSAhPT0gdGhpcy5zdGF0ZS5hbmlzb3Ryb3B5KSB7XG4gICAgICAgICAgICB0aGlzLmdsLnRleFBhcmFtZXRlcmYoXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgdGhpcy5nbC5yZW5kZXJlci5nZXRFeHRlbnNpb24oJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpLlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULFxuICAgICAgICAgICAgICAgIHRoaXMuYW5pc290cm9weVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYW5pc290cm9weSA9IHRoaXMuYW5pc290cm9weTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmltYWdlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZS53aWR0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmltYWdlLndpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5pbWFnZS5oZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gdGhpcy5nbC5URVhUVVJFX0NVQkVfTUFQKSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIGN1YmUgbWFwc1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2wudGV4SW1hZ2UyRChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVybmFsRm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlW2ldXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcodGhpcy5pbWFnZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBEYXRhIHRleHR1cmVcbiAgICAgICAgICAgICAgICB0aGlzLmdsLnRleEltYWdlMkQodGhpcy50YXJnZXQsIHRoaXMubGV2ZWwsIHRoaXMuaW50ZXJuYWxGb3JtYXQsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCAwLCB0aGlzLmZvcm1hdCwgdGhpcy50eXBlLCB0aGlzLmltYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbWFnZS5pc0NvbXByZXNzZWRUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29tcHJlc3NlZCB0ZXh0dXJlXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbGV2ZWwgPSAwOyBsZXZlbCA8IHRoaXMuaW1hZ2UubGVuZ3RoOyBsZXZlbCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2wuY29tcHJlc3NlZFRleEltYWdlMkQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbEZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VbbGV2ZWxdLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVtsZXZlbF0uaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VbbGV2ZWxdLmRhdGFcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlZ3VsYXIgdGV4dHVyZVxuICAgICAgICAgICAgICAgIHRoaXMuZ2wudGV4SW1hZ2UyRCh0aGlzLnRhcmdldCwgdGhpcy5sZXZlbCwgdGhpcy5pbnRlcm5hbEZvcm1hdCwgdGhpcy5mb3JtYXQsIHRoaXMudHlwZSwgdGhpcy5pbWFnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmdlbmVyYXRlTWlwbWFwcykge1xuICAgICAgICAgICAgICAgIC8vIEZvciBXZWJHTDEsIGlmIG5vdCBhIHBvd2VyIG9mIDIsIHR1cm4gb2ZmIG1pcHMsIHNldCB3cmFwcGluZyB0byBjbGFtcCB0byBlZGdlIGFuZCBtaW5GaWx0ZXIgdG8gbGluZWFyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmdsLnJlbmRlcmVyLmlzV2ViZ2wyICYmICghaXNQb3dlck9mMih0aGlzLmltYWdlLndpZHRoKSB8fCAhaXNQb3dlck9mMih0aGlzLmltYWdlLmhlaWdodCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNaXBtYXBzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JhcFMgPSB0aGlzLndyYXBUID0gdGhpcy5nbC5DTEFNUF9UT19FREdFO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbkZpbHRlciA9IHRoaXMuZ2wuTElORUFSO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2wuZ2VuZXJhdGVNaXBtYXAodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gZGF0YSBpcyBwdXNoZWQgdG8gR1BVXG4gICAgICAgICAgICB0aGlzLm9uVXBkYXRlICYmIHRoaXMub25VcGRhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gdGhpcy5nbC5URVhUVVJFX0NVQkVfTUFQKSB7XG4gICAgICAgICAgICAgICAgLy8gVXBsb2FkIGVtcHR5IHBpeGVsIGZvciBlYWNoIHNpZGUgd2hpbGUgbm8gaW1hZ2UgdG8gYXZvaWQgZXJyb3JzIHdoaWxlIGltYWdlIG9yIHZpZGVvIGxvYWRpbmdcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdsLnRleEltYWdlMkQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCArIGksXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nbC5SR0JBLFxuICAgICAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nbC5SR0JBLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nbC5VTlNJR05FRF9CWVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlQaXhlbFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy53aWR0aCkge1xuICAgICAgICAgICAgICAgIC8vIGltYWdlIGludGVudGlvbmFsbHkgbGVmdCBudWxsIGZvciBSZW5kZXJUYXJnZXRcbiAgICAgICAgICAgICAgICB0aGlzLmdsLnRleEltYWdlMkQodGhpcy50YXJnZXQsIHRoaXMubGV2ZWwsIHRoaXMuaW50ZXJuYWxGb3JtYXQsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCAwLCB0aGlzLmZvcm1hdCwgdGhpcy50eXBlLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVXBsb2FkIGVtcHR5IHBpeGVsIGlmIG5vIGltYWdlIHRvIGF2b2lkIGVycm9ycyB3aGlsZSBpbWFnZSBvciB2aWRlbyBsb2FkaW5nXG4gICAgICAgICAgICAgICAgdGhpcy5nbC50ZXhJbWFnZTJEKHRoaXMudGFyZ2V0LCAwLCB0aGlzLmdsLlJHQkEsIDEsIDEsIDAsIHRoaXMuZ2wuUkdCQSwgdGhpcy5nbC5VTlNJR05FRF9CWVRFLCBlbXB0eVBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3JlLmltYWdlID0gdGhpcy5pbWFnZTtcbiAgICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJkNjI4YmJhMDBkZTZmYTYyYmY3M1wiKSJdLCJuYW1lcyI6WyJQcmVsb2FkZXIiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsImNhbnZhcyIsInN1cGVyIiwiZWxlbWVudCIsImVsZW1lbnRzIiwidGl0bGUiLCJ1cG51bWJlciIsImRvd251bWJlciIsIm92ZXJsYXkiLCJjb250YWluZXIiLCJ0aGlzIiwid2luZG93IiwiVEVYVFVSRVMiLCJzcGxpdCIsImV4cHJlc3Npb24iLCJ0aXRsZVNwYW5zIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImNyZWF0ZUxvYWRlciIsIkFTU0VUUyIsImZvckVhY2giLCJpbWFnZSIsInRleHR1cmUiLCJUZXh0dXJlIiwiZ2wiLCJnZW5lcmF0ZU1pcG1hcHMiLCJtZWRpYSIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJzcmMiLCJvbmxvYWQiLCJfIiwib25Bc3NldExvYWRlZCIsInBlcmNlbnQiLCJpbm5lckhUTUwiLCJNYXRoIiwicm91bmQiLCJvbkxvYWRlZCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZW1pdCIsImFuaW1hdGVPdXQiLCJHU0FQIiwiZGVsYXkiLCJkZWZhdWx0cyIsImR1cmF0aW9uIiwiZWFzZSIsInRvIiwiYXV0b0FscGhhIiwieSIsInNjYWxlWSIsInRyYW5zZm9ybU9yaWdpbiIsImNhbGwiLCJkZXN0cm95IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZW1wdHlQaXhlbCIsIlVpbnQ4QXJyYXkiLCJpc1Bvd2VyT2YyIiwidmFsdWUiLCJJRCIsInRhcmdldCIsIlRFWFRVUkVfMkQiLCJ0eXBlIiwiVU5TSUdORURfQllURSIsImZvcm1hdCIsIlJHQkEiLCJpbnRlcm5hbEZvcm1hdCIsIndyYXBTIiwiQ0xBTVBfVE9fRURHRSIsIndyYXBUIiwibWluRmlsdGVyIiwiTkVBUkVTVF9NSVBNQVBfTElORUFSIiwiTElORUFSIiwibWFnRmlsdGVyIiwicHJlbXVsdGlwbHlBbHBoYSIsInVucGFja0FsaWdubWVudCIsImZsaXBZIiwiYW5pc290cm9weSIsImxldmVsIiwid2lkdGgiLCJoZWlnaHQiLCJpZCIsIm1pbiIsInJlbmRlcmVyIiwicGFyYW1ldGVycyIsIm1heEFuaXNvdHJvcHkiLCJjcmVhdGVUZXh0dXJlIiwic3RvcmUiLCJnbFN0YXRlIiwic3RhdGUiLCJSRVBFQVQiLCJiaW5kIiwidGV4dHVyZVVuaXRzIiwiYWN0aXZlVGV4dHVyZVVuaXQiLCJiaW5kVGV4dHVyZSIsInVwZGF0ZSIsInRleHR1cmVVbml0IiwibmVlZHNVcGRhdGUiLCJhY3RpdmVUZXh0dXJlIiwicGl4ZWxTdG9yZWkiLCJVTlBBQ0tfRkxJUF9ZX1dFQkdMIiwiVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMIiwiVU5QQUNLX0FMSUdOTUVOVCIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01JTl9GSUxURVIiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIlRFWFRVUkVfV1JBUF9UIiwidGV4UGFyYW1ldGVyZiIsImdldEV4dGVuc2lvbiIsIlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUIiwiVEVYVFVSRV9DVUJFX01BUCIsImkiLCJ0ZXhJbWFnZTJEIiwiVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YIiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJpc0NvbXByZXNzZWRUZXh0dXJlIiwiY29tcHJlc3NlZFRleEltYWdlMkQiLCJkYXRhIiwiaXNXZWJnbDIiLCJnZW5lcmF0ZU1pcG1hcCIsIm9uVXBkYXRlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9